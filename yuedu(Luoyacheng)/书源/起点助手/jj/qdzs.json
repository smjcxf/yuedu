[{
  "bookSourceGroup": "ğŸ““,èµ·ç‚¹",
  "bookSourceName": "ğŸŒˆèµ·ç‚¹åŠ©æ‰‹",
  "bookSourceType": 0,
  "bookSourceUrl": "https://èµ·ç‚¹åŠ©æ‰‹.luoyacheng.ip-ddns.com",
  "bookUrlPattern": "http://127.0.0.1/qdzs/.*|https://.*qidian.com/book/\\d{5,}/?",
  "concurrentRate": "3/1000",
  "customOrder": 0,
  "enabled": true,
  "enabledCookieJar": true,
  "enabledExplore": true,
  "exploreUrl": "@js:\nlet banben=\"2.0.1\";\nvar obj = {\n\tæŠ•èµ„åŠ©æ‰‹: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘ ,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t},\t\n\tç›Ÿä¸»æ’è¡Œ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘¦,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tèµ·ç‚¹æ¦œå•: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â–³,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tå¤§ç¥æ–°ä¹¦: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘¡,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tæ½œåŠ›æ–°ä½œ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘¢,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tæ–°äººæ–°ä¹¦: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘£,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tèµ·ç‚¹é¦–é¡µ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"å„„,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tä¸‰æ±Ÿæ¨è: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"å£¹,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tæ–°ä¹¦å¼ºæ¨: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"è´°,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\té¦–è®¢æ•°æ®: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â‘¤,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tæŸ¥çœ‹ä¹¦è¯„: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"è¯„,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tæŸ¥çœ‹ä¹¦å•: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"å•,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\t'â†“ã€€è£èª‰å¾½ç« ã€€â†“': {\n\t\turl: '',\n\t\twb:1\n\t\t\t},\n\tè£è€€ä¸€æ˜Ÿ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â… ,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tè£è€€äºŒæ˜Ÿ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…¡,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tè£è€€ä¸‰æ˜Ÿ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…¢,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tè£è€€å››æ˜Ÿ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…£,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tè£è€€äº”æ˜Ÿ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…¤,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tåäºŒå¤©ç‹: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…«,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tç²¾å“é¢‘é“: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…°,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tä¸€å­—åƒé‡‘: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…±,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tæ—¥æ›´ä¸‡å­—: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…²,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tä¸‡äººè¿½æ§: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…³,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\tä¼—æ˜Ÿæ§æœˆ: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…´,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tä¸€å‘¼ç™¾åº”: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…µ,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tç™¾ç›Ÿäº‰éœ¸: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…¶,\"+page)},{\"type\":\"lyc\"}` }}',\n\t\twb:1\n\t\t\t},\n\té¦–è®¢è¿‡ä¸‡: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…·,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t},\n\tæœˆç¥¨ç¬¬ä¸€: {\n\t\turl: '{{`data:page;base64,${java.base64Encode(\"â…¸,\"+page)},{\"type\":\"lyc\"}` }}'\n\t\t\t}\n\t\n\t}\n\nvar sort = [];\npush = (title, url, size, wrap) => sort.push({\n    \"title\": title,\n    \"url\": url,\n    \"style\": {\n      layout_flexGrow: size || 1,\n      layout_flexBasisPercent: -1,\n      layout_wrapBefore: wrap ? true : false\n     }\n  });\n\nfor (x in obj) {\npush(x, obj[x].url, obj[x].fg, obj[x].wb);\n}\nJSON.stringify(sort);",
  "lastUpdateTime": 0,
  "loginUi": "@js:\n`[\n    {\n        name: \"éšæœºæ³¨å†Œ\",\n        type: \"button\",\n        action: \"sjzc()\"\n    },\n    \t{\n        name: \"æ£€æµ‹æœˆç¥¨æ´»åŠ¨\",\n        type: \"button\",\n        action: \"bfqfun2('æœˆç¥¨æ´»åŠ¨')\"\n    },\n    \t{\n        name: \"æœ¬ç« è¯´\",\n        type: \"button\",\n        action: \"bfqfun2('æœ¬ç« è¯´')\"\n    },\n    \t{\n        name: \"ç‚¹å‡»ä½œè€…\",\n        type: \"button\",\n        action: \"zuozhes()\"\n    },\n    \t{\n        name: \"å‡€åŒ–æ­£æ–‡æ ‡é¢˜\",\n        type: \"button\",\n        action: \"bfqfun2('å‡€åŒ–æ ‡é¢˜')\"\n    },\n    \t{\n        name: \"æ®µ  è¯„\",\n        type: \"button\",\n        action: \"bfqfun2('æ®µè¯„')\"\n    },\n    \t{\n        name: \"æ›´æ–°ä¹¦æº\",\n        type: \"button\",\n        action: \"gengxin()\"\n    },\n    \t{\n        name: \"è‡ªåŠ¨å®šä½é¦–ç« \",\n        type: \"button\",\n        action: \"bfqfun2('å®šä½é¦–ç« ')\"\n    },\n    \t{\n        name: \"æ‰“å¼€èµ·ç‚¹\",\n        type: \"button\",\n        action: \"dbkid(1)\"\n    },\n    \t{\n        name: \"äººæ°”è§’è‰²\",\n        type: \"button\",\n        action: \"dbkid(2)\"\n    },\n    {\n        name: \"å­—ä½“é¢œè‰²\",\n        type: \"text\"\n    },\n    {\n        name: \"è°ƒè¯•æ¨¡å¼\",\n        type: \"button\",\n        action: \"bfqfun2('è°ƒè¯•æ¨¡å¼')\",\n        \"style\": {\n            \"layout_flexGrow\": 0,\n            \"layout_flexBasisPercent\": -1\n        }\n    },\n    \t{\n        name: \"${refreshUI()}\",\n        type: \"button\",\n        action: \"refresh()\"\n    },\n    {\n        name: \"é™å…é“¾æ¥\",\n        type: \"text\"\n    }\n]`",
  "loginUrl": "function zuozhes() {\nlet zzs = source.get('zzs');\nif(zzs!=1){source.put('zzs',1);java.longToast('\\nç‰¹æ€§å·²å¼€å¯\\nåœ¨ä¹¦ç±è¯¦æƒ…é¡µç‚¹å‡»ä½œè€…åç‰¹å®šæœä¹¦\\né™„åŠ æ•ˆæœï¼šç›¸åŒä¹¦ç±å…±å­˜');}\nelse{source.put('zzs',0);java.toast('\\nç‰¹æ€§å·²å…³é—­\\n\\n');}\n}\n\nfunction bfqfun2(x) {\nlet xx = source.get('zs'+x);\n//é»˜è®¤å…³é—­\nif(xx!=1) source.put('zs'+x,1),java.toast('ğŸŸ¢å·²å¼€å¯ '+x);\nelse source.put('zs'+x,0),java.toast('âš«å·²å…³é—­ '+x);}\n\nfunction dbkid(x) {\ntry {\nif (!book) throw 'è¯·åœ¨ä¹¦ç±ç•Œé¢ç‚¹å‡»';\nvar bkid=book.getVariable(\"bkid\");\nif (bkid.length()<3) throw 'æœªæ­£å¸¸è·å–id';\nif (x==1)\njava.openUrl('qdreader://app/showBook?query={\"bookId\":'+bkid+'}');\nelse if (x==2)\nrqjs(bkid);\n} catch(err) {java.toast(err);}\n}\n\nfunction refresh() {\n\tsource.refreshJSLib();\n\tjava.downloadFile(lycurl);\n\tlet r=eval(java.readTxtFile(java.md5Encode16(lycurl)+'.json')+'')[0];\t\n\tr&&cache.putMemory(lycnm,r);\n\tjava.toast('å·²æ‰‹åŠ¨æ›´æ–°ä»£ç ');\n}\n\nfunction refreshUI() {\n\tftjs(7);\n\tif (Math.random() < 0.4) gxjslib();\n\treturn 'æ›´æ–°ä»£ç ï¼š'+banben2;\n}\n\r\nfunction login() {}",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": "au",
    "coverUrl": "cu",
    "init": "@js:\nif (Math.random() < 0.3) gxjslib();\nlet bkid;\nlet bj = java.get('bj');\nif (/^è¯„$/.test(bj)) {\n    let jj = java.get('bkjianjie');\n    //ç›®å½•é“¾æ¥åŒä¹¦ç±é“¾æ¥\n    let tur = book.bookUrl.replace('pe\":\"lyc', 'pe\":\"l');\n    //ç›´æ¥æ§åˆ¶ç®€ä»‹\n    book.intro = jj;\n    result = {\n        tur: tur\n    };\n\n} else {\n    //æœç´¢è·³è¯¦æƒ…é‡å®šå‘å¤„ç†\n    let ii = String(book.bookUrl).startsWith('http');\n    if (ii) {\n        bkid = String(book.bookUrl).match(/\\d{5,}(?=\\/?$)/);\n        java.put('bkid', bkid);\n        book.bookUrl = `data:page;base64,${java.base64Encode('https://m.qidian.com/book/'+bkid)},{\"type\":\"lyc\"}`;\n    }\n\n    bkid = java.get('bkid');\n    let rr = cache.getFromMemory('zs' + bkid);\n    let rr2 = cache.get('zss' + bkid);\n    let rr3 = cache.get('zst' + bkid);\n    let url1 = QDSign(\"v3/bookdetail/get\", [\"bookId=\" + bkid, \"isOutBook=0\"]);\n    let url2 = gethd(qdturl + '/info/' + bkid);\n    let url3 = gethd(`https://pre-api.tuishujun.com/api/searchBook?search_value=${book.name}&page=1&pageSize=3`);\n\n    if (!rr) {\n        rr = java.ajax(url1);\n        cache.put('zs' + bkid, rr, 86400);\n    }\n    if (!rr2) {\n        rr2 = java.ajax(url2);\n        rr3 ? cache.put('zss' + bkid, rr2, 86400) :\n            cache.put('zss' + bkid, rr2, 86400 * 2);\n    }\n    if (!rr3) {\n        rr3 = java.ajax(url3);\n        rr3.includes(`\"data\":[]`) ?\n            cache.put('zst' + bkid, rr3, 864000) :\n            cache.put('zst' + bkid, rr3, 864000 * 2);\n    }\n\n    //è·å–èµ·ç‚¹å›¾ä½œè€…\n    let au = gets('class.media-body@tr.1@a.-1@text', rr2);\n    //è·å–æ¨ä¹¦å›\n    let aly = new JavaImporter(Packages.com.jayway.jsonpath);\n    with(aly) {\n        var jsonp = JsonPath.using(\n            Configuration.builder()\n            .options(Option.SUPPRESS_EXCEPTIONS)\n            .build()\n        ).parse(rr3);\n    }\n    let tsin = jsonp.read(`$..data[?(@.author_nickname==\"${(book.author+'').replace('\\u200b','')||au}\")]['score','score_people_number','first_subscribe']`);\n\n    let tspf = '',\n        tssd = '';\n    if (tsin != '[]') {\n        //è¯„åˆ†\n        tsin[0].score_people_number != 0 && (tspf = `\\u200f${tsin[0].score}åˆ† (${tsin[0].score_people_number}äºº)\n`);\n        //é¦–è®¢\n        (tsin[0].first_subscribe + []).length > 4 && (tssd = `é¦–è®¢ï¼š${tsin[0].first_subscribe}\n`);\n    }\n\n    //è·å–èµ·ç‚¹å›¾ä¿¡æ¯\n    //è·å–æ”¶è—æ•°ä¿ç•™ä¸€ä½å°æ•°ï¼Œä¸Šåƒä¸‡æ—¶ä¸ä¿ç•™\n    let sc = gets('class.media-body@tr.4@text', rr2);\n    sc = (sc.match(/æ”¶è—\\D*([\\d\\.w]+)/) || ['', ''])[1].replace(/(\\.\\d)\\d*w/, '$1ä¸‡').replace(/(\\d{4,})\\.\\dä¸‡/, '$1ä¸‡');\n    //æ— æ”¶è—å¤„ç†\n    sc == '' ? '' : sc = 'æ”¶è—:' + sc;\n    //è·å–å°é¢\n    let cu = 'https://qidian.qpic.cn/qdbimg/349573/' + bkid + '/600';\n    //è·å–ç²‰ä¸ï¼Œæ–°ä¹¦æ²¡æœ‰\n    let fs = gets('class.media-body@tr.3@text', rr2);\n    fs = (fs.match(/ç²‰ä¸\\D*([\\d\\.w]+)/) || ['', ''])[1].replace(/(\\.\\d)\\d*w/, '$1ä¸‡');\n    if (fs) {\n        fs = 'ç²‰ä¸:' + fs;\n    }\n    //è·å–ç›Ÿä¸»ï¼Œå¯èƒ½æ²¡æœ‰ï¼Œæ ‡ç­¾è¶…é¢ï¼Œæ··å…¥ç®€ä»‹\n    let mz = gets('class.media-body@tr.4@text', rr2);\n    mz = (mz.match(/ç›Ÿä¸»\\D*(\\d+)/) || ['', ''])[1];\n    if (mz) {\n        mz = 'æœ¬ä¹¦å·²æœ‰' + mz + 'ä½ç›Ÿä¸»\\n';\n    }\n\n    java.setContent(rr);\n    //ä¹¦ç±ä¿¡æ¯\n    //æ˜¯å¦å­˜åœ¨æ£€æŸ¥-101\n    let lyc = gets('$.Result');\n    //ç±»å‹\n    let lx = gets('$.*.BaseBookInfo.CategoryName');\n    //äºŒçº§åˆ†ç±»\n    let lx2 = gets('$.*.BaseBookInfo.SubCategoryName');\n    //æ¨è\n    let tj = gets('$.*.BaseBookInfo.RecommendAll');\n    //æ ‡ç­¾ï¼Œæ··ä¸Šèµ·ç‚¹å›¾\n    //sc = sc>9999 ? \t(sc/10000).toFixed(2)+'ä¸‡' : sc;\n    tj = tj > 9999999 ? 'æ¨è:' + (tj / 10000).toFixed() + 'ä¸‡' : tj > 9999 ? 'æ¨è:' + (tj / 10000).toFixed(1) + 'ä¸‡' : tj > 0 ? 'æ¨è:' + tj : '';\n    let kd = [lx, tj, sc, fs];\n    //å­—æ•°\n    let wc = gets('$.*.BaseBookInfo.WordsCnt');\n    //æŠ•èµ„\n    let tz = gets('$.*.BaseBookInfo.NewBookInvestCount');\n    tz = tz == -1 ? '' : 'å·²æœ‰' + tz + 'äººæŠ•èµ„æœ¬ä¹¦\\n';\n    //çŠ¶æ€\n    let zt = gets('$.*.BaseBookInfo.BookStatus');\n    //é™å…\n    let xm = gets('$.*.BaseBookInfo.FreshManSimple.IsInBlackList');\n    java.put('xm', xm);\n    //æœ€æ–°VIPç« èŠ‚\n    let lcv = gets('$.*.BaseBookInfo.ChapterInfo.LastVipUpdateChapterName');\n    //æœ€æ–°ç« èŠ‚\n    let lc = gets('$.*.BaseBookInfo.ChapterInfo.LastUpdateChapterName');\n    //æœ€æ–°æ—¶é—´å…è´¹\n    let lct = gets('$.*.BaseBookInfo.ChapterInfo.LastChapterUpdateTime');\n    //æœ€æ–°æ—¶é—´vip\n    let lct2 = gets('$.*.BaseBookInfo.ChapterInfo.LastVipChapterUpdateTime');\n    //é‡‡ç”¨æœ€æ–°çš„\n    if (lct2 > lct) {\n        lct = lct2;\n        lc = lcv;\n    }\n    lct = java.timeFormatUTC(lct, \"yyyyå¹´MMæœˆddæ—¥HH:mm\", 288e5);\n    //æœˆç¥¨æ•°é‡\n    let yp = gets('$.*.BaseBookInfo.MonthTicketCount');\n    yp = yp > 9999 ? (yp / 10000).toFixed(1) + 'ä¸‡' : yp;\n    //æ–°å»ºæ—¶é—´\n    let jt = gets('$.*.BaseBookInfo.JoinTime');\n    jt = java.timeFormatUTC(jt, \"yyyy/MM/dd\", 288e5); //HH:mm\n    //ç®€ä»‹\n    let jianjie = gets('$.*.BaseBookInfo.Description');\n    //ä¹¦å\n    let bknm = gets('$.*.BaseBookInfo.BookName');\n\n    //ä½œè€…åï¼Œä¸ºç©ºæ—¶ç”¨èµ·ç‚¹å›¾\n    au = gets('$.*.AuthorInfo.Author') || au || (book.author + []).replace('\\u200b', '');\n    //ç‰¹å®šæœç´¢åŠŸèƒ½\n    let zzs = source.get('zzs');\n    if (zzs == 1) {\n        au = '\\u200b' + au;\n    }\n    book.author = au; //ä¹¦æ¶å·²å­˜åœ¨æ—¶ï¼Œæ”¹å›å»ä¼šæŠ¥é”™\n    //ç­‰çº§ï¼Œå‡ºç‰ˆä¹¦æ— \n    let aul = gets('$.*.AuthorInfo.AuthorLevel');\n    if (aul) {\n        aul = ` (${aul})`;\n    }\n    //ä½œå“æ•°ï¼Œå‡ºç‰ˆä¹¦æ— \n    let aus = gets('$.*.AuthorInfo.BookCount');\n    aus = aus == 0 ? gets('$..Publisher') : 'å·²æœ‰' + aus + 'æœ¬ä½œå“';\n    //ä½œè€…ID\n    let auid = gets('$.*.AuthorInfo.AuthorId');\n    //ä½œè€…å¤´åƒ\n    let auim = gets('$.*.AuthorInfo.RealImageUrl');\n    //å­˜å¤´åƒ\n    java.put('auim', auim);\n    //ä½œè€…ç®€ä»‹\n    let aude = gets('$.*.AuthorInfo.AuthorDesc');\n    //å­˜ä½œè€…è¯´æ˜\n    java.put('aude', aude);\n\n    //ä¹¦å•è¯„è®º\n    let sdjj = cache.getFromMemory('zsjjl' + bkid) || '';\n    //ç¼–å†™åŠ è½½ç®€ä»‹\n    let it = `${sdjj}${au}${aul} ${aus}\n${tz}${mz}ç±»å‹ï¼š${lx2}\n${tssd}æœˆç¥¨ï¼š${yp}\n${tspf}\\u202b\\u200f${lct} æ›´æ–°\n\\u200b\n${jianjie}`; //${jt}\n\n    //ä¸å­˜åœ¨æ—¶åé¦ˆåˆ°ç®€ä»‹\n    if (lyc < 0) {\n        it = 'â—èµ·ç‚¹åé¦ˆï¼š' + gets('$.Message') + '\\næœ€æ–°ï¼š' + book.latestChapterTitle + '\\næœ¬ä¹¦idï¼š' + bkid;\n        //å¼‚å¸¸æ—¶æ ‡è®°è¯¥ä¹¦,å·²ä¸‹æ¶\n        java.put('yxj', 1);\n    }\n\n    //ç›®å½•é“¾æ¥åŒä¹¦ç±é“¾æ¥\n    let tur = book.bookUrl.replace('pe\":\"lyc', 'pe\":\"l');\n    //æ— è„‘æ›´æ–°ä¹¦å\n    book.name = bknm || book.name;\n    //ç›´æ¥æ§åˆ¶ç®€ä»‹\n    book.intro = it;\n    lc = lc + ' â€¢ ' + lct;\n    result = {\n        nm: bknm,\n        au: au,\n        kd: kd,\n        wc: wc,\n        lc: lc,\n        cu: cu,\n        tur: tur\n    };\n}\nresult",
    "kind": "kd",
    "lastChapter": "lc",
    "name": "nm",
    "tocUrl": "tur",
    "wordCount": "wc"
  },
  "ruleContent": {
    "content": "@js:\nlet bkid = book.getVariable('bkid');\n\nlet [, zcid] = chapter.url.match(/^[^\\,]+,([^\\,]+)/);\nzcid = java.base64Decode(zcid);\njava.put(\"cid\", zcid);\nlet uvip = book.getVariable(\"uvip\" + zcid);\nlet bin = book.durChapterIndex;\nlet cin = chapter.index;\nlet tsms = source.get('zsè°ƒè¯•æ¨¡å¼') == 1;\n\nif (chapter.isVolume()) {\n\t//å·ç« \n\tlet url1 = QDSign(\"v1/chapterlist/getvolumeinfo\", [\"bookId=\" + bkid, \"volumeCode=\" + zcid]);\n\tresult = java.ajax(url1);\n\tresult = gets('$..VolumeDescription', result);\n}\nelse if (zcid.startsWith('å½©')) {\n\t//å½©è›‹\n\tzcid = zcid.slice(1);\n\tlet url3 = QDSign(\"v3/midpage/pageinfo\", [\"bookId=\" + bkid, \"chapterId=\" + zcid, \"needAdv=0\"]);\n\tresult = java.ajax(url3);\n\tlet rr = '';\n\tlet zssj = cache.get('zssj').split(',');\n\tlet pg = com.jayway.jsonpath.JsonPath.parse(result).read('$..MidPageList[*]');\n\tfor (let cpg of pg) {\n\t\tbook.imageStyle = '';\n\t\tlet sl = com.jayway.jsonpath.JsonPath.parse(cpg);\n\t\tlet pid = (sl.read('$..PageId') + '').slice(1, -1);\n\t\tlet slc = sl.read('$..Widgets[*].Data');\n\t\tfor (let char of slc) {\n\t\t\tlet bt = char.Text;\n\t\t\tlet imu = char.ImgUrl;\n\t\t\tlet viu = char.VideoCoverUrl;\n\t\t\tlet vurl = char.VideoUrl;\n\t\t\tlet [, sid] = (char + '').match(/\\WSourceId\\D+(\\d+)/) || [];\n\n\t\t\tlet type = 3;\n\t\t\tlet ua = `Dalvik/2.1.0 (Linux; U; Android 10; ${zssj[1]} Build/UKQ1.230924.001)`;\n\t\t\tif (viu && vurl != '') {\n\t\t\t\timu = viu;\n\t\t\t\ttype = 1;\n\t\t\t\trr += `\n<img src=\"${imu},{\"headers\":{\"User-Agent\":\"${ua}\"},\"js\":\"videoh('${vurl}','${bt}','${imu}');result\"}\">ç‚¹å‡»å›¾ç‰‡ï¼Œæ’­æ”¾è§†é¢‘ã€‚`;\n\t\t\t} else {\n\t\t\t\trr += `\n<img src=\"${imu},{\"headers\":{\"User-Agent\":\"${ua}\"}}\">`;\n\t\t\t}\n\n\t\t\tlet url33 = QDSign(\"v1/midpage/danmu/get\", [\"bookId=\" + bkid, \"midpageId=\" + pid, \"resourceId=\" + sid, \"type=\" + type, \"timeAt=0\", \"seconds=10\"]);\n\t\t\tresult = java.ajax(url33);\n\t\t\tlet dmt = '';\n\t\t\tlet dms = jiesuo('', result, '$..Text');\n\t\t\tlet hs = 1, ls = 1, zs = 0;\n\t\t\tlet imt = '';\n\t\t\tlet svg = () => `<svg width=\"1080\" height=\"${hs * 70 + 10}\" xmlns=\"http://www.w3.org/2000/svg\">${imt}</svg>`;\n\t\t\tfor (let dm of dms) {\n\t\t\t\tif (imt == '') imt = `<text fill=\"#${color()}\" opacity=\"0.9\"  dominant-baseline=\"middle\" font-weight=\"bold\" font-size=\"48\">`;\n\t\t\t\tdm = (dm + '').replace(/\\[fn=(\\d+)\\]/g, (x, y) => { return emojisMap[y] });\n\t\t\t\tzs += (Math.random() * 30 | 0) / 10;\n\t\t\t\tzzs = zs + dm.length;\n\t\t\t\tif (zzs > 19) { hs++; zs = (Math.random() * 30 | 0) / 10; }\n\t\t\t\timt += `<tspan x=\"${zs * 60}\" y=\"${hs * 70}\">${dm}</tspan>`;\n\t\t\t\tzs += dm.length;\n\t\t\t\tif (hs > 9) {\n\t\t\t\t\timt += `</text>`;\n\t\t\t\t\tlet img = `<img src=\"data:image/svg+xml;base64,${java.base64Encode(svg())},{\"type\":\"img\"}\">`;\n\t\t\t\t\trr += img;\n\t\t\t\t\ths = 1; zs = 0; imt = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (imt != '') {\n\t\t\t\timt += `</text>`;\n\t\t\t\tlet img = `<img src=\"data:image/svg+xml;base64,${java.base64Encode(svg())},{\"type\":\"img\"}\">`;\n\t\t\t\trr += img;\n\t\t\t}\n\t\t}\n\t}\n\tresult = rr;\n} else if (chapter.isVip() || uvip == '2') {\n\t//VIPç« \n\tlet [, cid] = baseUrl.match(/^[^\\,]+,([^\\,]+)/);\n\tcid = java.base64Decode(cid);\n\tlet bkbl = book.getVariable(\"custom\") + '';\n\t//ç ´è§£æ–¹å¼\n\tlet pjfs = \n\t\t/wxsck.com/.test(bkbl) ? 5 :\n\t\t/libahao.com|^ç¯±ç¬†/.test(bkbl) ? 4 :\n\t\tbkbl.includes(sdgurl)||bkbl.includes(dqurl) ? 3 :\n\t\t/^https?:/.test(bkbl) ? 2 :\n\t\tbkbl.startsWith('ç¬”è¶£é˜') ? 1 : 0;\n\t\tresult = getresult(source.getLoginInfoMap().get('é™å…é“¾æ¥')+'',book.getVariable('xm'),bkid,zcid);\n\t\tif (result !=='' ) {java.put('xyy', ''); pjfs=-1;}\n\t\tif (pjfs!=0&&cid==zcid&&source.get('zsæ®µè¯„')==1) {\n\t\t\tlet dpurl = QDSign(\"v1/chapterreview/getchapterrepagesummary\", [\"bookId=\" + bkid, \"chapterId=\" + zcid, \"useImei=0\"]);\n\t\t\tlet dprr = jiesuo(dpurl,bkid,0,zcid);;\n\t\t\tjava.put(\"dp\", dprr);\n\t\t\t//æ®µè¯„ç»“æŸ\n\t\t\t}\n\tif (pjfs > 0) {\n\t\t//ç¬”è¶£é˜æ›¿æ¢\n\t\t//è·å–é‡å®šå‘åœ°å€å¤´\n\t\tlet cdx = java.get('cdx');\n\t\t//ä¼˜å…ˆ69çš„å¤´ï¼Œé€Ÿè¯»è°·ä¹Ÿéœ€è¦\n\t\tif (pjfs != 1) cdx = bkbl.match(/http.{4}[^\\/]+/)[0];\n\t\t//è®¿é—®ç»“æœ\n\t\tvar pjt = '';\n\t\tlet pjr = book.getVariable(\"zspj\");\n\n\t\tfunction httu(url, fs) {\n\t\t\tlet ck = '';\n\t\t\tif (fs == 3) ck = cookie.getCookie(cdx);\n\t\t\tif (fs == 4) ck = cookie.getCookie(lbhurl);\n\t\t\tlet net = java.connect(gethd(url, ck));\n\t\t\tlet bdy = net.body();\n\t\t\tck = Array.from(\n\t\t\t\tnet.headers()\n\t\t\t\t\t.values(\"Set-Cookie\"))\n\t\t\t\t.map(x => String(x).replace(/;.*/, '')).join('; ');\n\t\t\tif (fs == 4) cookie.replaceCookie(lbhurl, ck);\n\t\t\tif (/^java\\.net|^error/.test(bdy)) bdy = '';\n\t\t\treturn bdy;\n\t\t}\n\n\t\tif (cid == zcid && pjr != '') {\n\t\t\t//ç¬¬ä¸€é¡µ\n\t\t\tpjr = org.jsoup.Jsoup.parse(pjr);\n\t\t\tlet ctitle = String(chapter.title);\n\t\t\tvar [, cpx, cnm] = ctitle.split(/^([^ç« èŠ‚å›]+[ç« èŠ‚å›]|[^ã€ï¼š]+[ã€ï¼š]|\\d{2,}.)/);\n\t\t\tcpx = cpx.replace(/^\\s+|[\\sã€ï¼š\\.]+$/g, '');\n\t\t\tcnm = cnm.replace(/^[ã€\\s]+|\\s+$/g, '');\n\t\t\tcnm || java.log('æ— æ ‡é¢˜åï¼Œåºå·ä¸ºï¼š' + cpx);\n\n\t\t\t//æŸ¥æ‰¾ç« èŠ‚\n\t\t\tvar pji = pjr.select('a:matchesWholeText(' + cpx + '.*' + cnm + ')').attr('href');\n\t\t\tif (pji == '' && /[ï¼ˆ(].*[)ï¼‰]/.test(cnm)) {\n\t\t\t\t//å¤„ç†æ‹¬å·å¹²æ‰°\n\t\t\t\tlet cnm2 = cnm.replace(/[ï¼ˆ(].*[)ï¼‰]/g, '.*');\n\t\t\t\ttsms && java.log('åŒ¹é…0\\n' + cpx + 'â™¦' + cnm2);\n\t\t\t\tpji = pjr.select('a:matchesWholeText(' + cpx + '.*' + cnm2 + ')').attr('href');\n\t\t\t}\n\n\t\t\tlet n1, n2;\n\t\t\tif (pji == '') {\n\t\t\t\t//ç”¨æ–°å®šä½é™åˆ¶\n\t\t\t\tlet cdw = book.getVariable('cdw');\n\t\t\t\tcdw = JSON.parse(cdw);\n\t\t\t\tlet index = cdw.findIndex(ob => ob.C == cid);\n\t\t\t\tvar cdwqj = 0;\n\t\t\t\tfor (let i = 0; i < index; i++) {\n\t\t\t\t\t/è¯·å‡/.test(cdw[i].N) && cdwqj++;\n\t\t\t\t}\n\t\t\t\tn1 = index - 10;\n\t\t\t\tif (n1 < 0) n1 = 0;\n\t\t\t\tn2 = index + 10;\n\t\t\t\ttsms && java.log('åŒ¹é…1\\n' + cpx + 'â™¦' + cnm + '\\nn1ï¼š' + n1 + 'ï¼Œn2ï¼š' + n2);\n\t\t\t\tpji = pjr.select(`a:gt(${n1}):lt(${n2}):matchesWholeText([\\\\sç« ã€ï¼š\\\\.]${cnm || 'æ´›å¨…æ©™lyc'}\\\\s*\\$)`).attr('href');\n\t\t\t}\n\t\t\tif (pji == '' && cnm) {\n\t\t\t\t//å¯èƒ½æ‹¬å·é€ æˆçš„\n\t\t\t\tlet t = '[ç›Ÿæœˆç¥¨è°¢æ›´æ±‚è®¢è¯»ç²‰æ–°]';\n\t\t\t\tlet zz = new RegExp(`[(ï¼ˆ].+${t}.*[ï¼‰)]|[(ï¼ˆ].*${t}.+[ï¼‰)]|ã€.+${t}.+ã€‘`, 'g');\n\t\t\t\tcnm = cnm\n\t\t\t\t\t.replace(zz, '') || 'æ´›å¨…æ©™lyc';\n\t\t\t\tn1 = (n1 - 10 < 0) ? 0 : (n1 - 10);\n\t\t\t\tn2 = n2 + 10;\n\t\t\t\ttsms && java.log('åŒ¹é…2\\n' + cpx + 'â™¦' + cnm + '\\nm1ï¼š' + n1 + 'ï¼Œn2ï¼š' + n2 + '\\n' + zz);\n\t\t\t\tpji = pjr.select(`a:gt(${n1}):lt(${n2}):matchesWholeText(${cnm}\\\\s*\\$)`).attr('href');\n\t\t\t}\n\t\t\tif (pji == '' && cnm) {\n\t\t\t\t//é€šåŒ¹æ‹¬å·å’Œç»“å°¾ç¬¦å·\n\t\t\t\t//æ„å»ºæ­£åˆ™\n\t\t\t\tlet zz = new RegExp('[(ï¼ˆ].*[ï¼‰)]$|ã€.*ã€‘$');\n\t\t\t\tcnm = cnm\n\t\t\t\t\t.replace(zz, '')\n\t\t\t\t\t.replace(/[ï¼Œã€‚ï¼Ÿï¼â€¦ï½Â·ã€ï¼›\\.â€¦\\-\\s]+$/, '') || 'æ´›å¨…æ©™æ©™lyc';\n\t\t\t\tn1 = (n1 - 40 < 0) ? 0 : (n1 - 10 - cdwqj);\n\t\t\t\tn2 = n2 + 10;\n\t\t\t\ttsms && java.log('åŒ¹é…3\\n' + cpx + 'â™¦' + cnm + '\\nn1ï¼š' + n1 + 'ï¼Œn2ï¼š' + n2 + '\\n' + zz + '\\nè¯·å‡æ¡' + cdwqj);\n\t\t\t\tpji = pjr.select(`a:gt(${n1}):lt(${n2}):matchesWholeText(${cnm})`).attr('href');\n\t\t\t}\n\t\t\tif (pji == '') {\n\t\t\t\t//é”™è¯¯ç‡å¢é«˜\n\t\t\t\tlet cnm1 = (cnm || 'æ ‡é¢˜ä¸ºç©ºä¾é å››ä½åºå·çš„æƒ…å†µ').match(/[ä¸€-ê€€]+/g);\n\t\t\t\t//æ„å»ºæ­£åˆ™\n\t\t\t\tlet zz = /\\d{4,}|[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒä¸‡]{4,}/.test(cpx) ? (cpx + '|') : ''; //åºå·\n\t\t\t\tif (cnm.length > 3) {\n\t\t\t\t\tfor (char of cnm1) zz = zz + char + '.*';\n\t\t\t\t}\n\t\t\t\telse zz = zz + '[\\\\sã€ï¼š\\.ç« ]' + cnm + '$';\n\t\t\t\tn1 = n1 + 10;//åå‘æå‡é˜²åŒ¹é…æ—§ç« èŠ‚\n\t\t\t\tn2 = n2 + 10;\n\t\t\t\ttsms && java.log('åŒ¹é…4\\n' + cpx + 'â™¦' + cnm + '\\nn1ï¼š' + n1 + 'ï¼Œn2ï¼š' + n2 + '\\n' + zz);\n\t\t\t\tpji = pjr.select(`a:gt(${n1}):lt(${n2}):matchesWholeText(${zz})`).attr('href');\n\t\t\t\ttsms && java.log('è§£é”ç›®å½•ï¼š\\n' + pjr);\n\t\t\t}\n\t\t\tif (pji == '' && cnm) {\n\t\t\t\tn1 = (n1 > 999) ? (n1 - 10) : n1;\n\t\t\t\t//å»é™¤æ„Ÿå¹è¯ï¼Œå¹²æ‰°ã€‚æå¤§æ”¾å®½ä¸Šé™\n\t\t\t\tn2 = n2 + 80;\n\t\t\t\tcnm = cnm.replace(/å§$/, '');\n\t\t\t\tlet zz = /[3456789]\\d{2,}/.test(cpx) ? (cpx + '|') : '';\n\t\t\t\tzz = zz + cnm;\n\t\t\t\ttsms && java.log('åŒ¹é…5\\n' + cpx + 'â™¦' + cnm + '\\nn1ï¼š' + n1 + 'ï¼Œn2ï¼š' + n2 + '\\n' + zz);\n\t\t\t\tpji = pjr.select(`a:gt(${n1}):lt(${n2}):matchesWholeText(${zz})`).attr('href');\n\t\t\t}\n\n\t\t\tif (pji == '') {\n\t\t\t\t//è·å–å•ç« æ›¿æ¢å†…å®¹\n\t\t\t\tpjt = (book.getVariable(\"avip\" + zcid) + '') || 'lyc';\n\t\t\t\tbook.putVariable(\"nurl\" + zcid, nextChapterUrl);\n\t\t\t\t//å¤±è´¥\n\t\t\t} else {\n\t\t\t\t//æˆåŠŸ\n\t\t\t\tpji = /^https?:/.test(pji) ? pji : pji.startsWith('//') ? ('https:' + pji) : (cdx + pji);\n\t\t\t\ttsms && java.log(pji);\n\t\t\t\tPackages.java.lang.Thread.sleep(Math.random() * 199 | 0);\n\t\t\t\tpjt = httu(pji, pjfs);\n\t\t\t\tcid = pji;\n\t\t\t\tif (pjt) {\n\t\t\t\t\t//å¤„ç†ç¹ä½“\n\t\t\t\t\tif (/69shux\\.co/.test(pji)) pjt = java.t2s(pjt);\n\t\t\t\t\t//æ ‡è®°vip\n\t\t\t\t\tbook.putVariable(\"uvip\" + zcid, 2);\n\t\t\t\t}\n\t\t\t\telse java.log('åˆæ¬¡è®¿é—®æ­£æ–‡å¤±è´¥');\n\t\t\t}\n\n\t\t\t//ç¬¬ä¸€é¡µç»“æŸ\n\t\t} else if (pjr == '') {\n\t\t\t//æ— è§£é”ç›®å½•\n\t\t\tpjt = '';\n\t\t} else {\n\t\t\t//ä¸‹ä¸€é¡µé“¾æ¥è®¿é—®å†…å®¹\n\t\t\tlet tim = Math.floor(Math.random() * 1399);\n\t\t\tPackages.java.lang.Thread.sleep(tim);\n\t\t\tpjt = httu(cid, pjfs);\n\t\t\tif (!pjt) java.log('æ­£æ–‡ä¸‹ä¸€é¡µè®¿é—®å¤±è´¥');\n\t\t}\n\n\t\tlet xyy = '';\n\t\tif (pjt == '') { result = ''; }\n\t\telse if (pjt == 'lyc') {\n\t\t\tresult = '';\n\t\t\tif (bin == cin) java.toast('\\nã€Š' + book.name + 'ã€‹\\n' + chapter.title + '\\næš‚æœªè§£é”');\n\t\t}\n\t\telse {\n\t\t\tjava.setContent(pjt);\n\t\t\tif (pjfs == 1) {\n\t\t\t\txyy = gets('text.ä¸‹ä¸€@href');\n\t\t\t\tif (xyy.includes('_')) xyy = cdx + xyy;\n\t\t\t\telse xyy = '';\n\t\t\t\tresult = gets('#chaptercontent@html');\n\t\t\t} else if (pjfs == 2) {\n\t\t\t\t//69çš„æ­£æ–‡åŒ¹é…\n\t\t\t\tresult = java.getElement('.content||.txtnav||.contxt||#txtcontent||#txtright');\n\t\t\t\tif (result == '' && bin == cin) java.toast('\\n69æ­£æ–‡é“¾æ¥è®¿é—®å¼‚å¸¸');\n\t\t\t\tresult.select('script, h1, .txtinfo, .chase-book-btn').remove();\n\t\t\t} else if (pjfs == 3) {\n\t\t\t\txyy = gets('text.ä¸‹ä¸€é¡µ@href');\n\t\t\t\tif (xyy.includes('-')) xyy = cdx + xyy;\n\t\t\t\telse xyy = '';\n\t\t\t\t//é€Ÿè¯»è°·æ­£æ–‡\n\t\t\t\tresult = java.getElement('.con');\n\t\t\t\tif (result == '' && bin == cin) java.toast('\\né€Ÿè¯»è°·/å¾—å¥‡æ­£æ–‡é“¾æ¥è®¿é—®å¼‚å¸¸');\n\t\t\t} else if (pjfs == 4) {\n\t\t\t\t//ç¯±ç¬†å¥½\n\t\t\t\txyy = gets('a:matchesWholeOwnText(^ä¸‹ä¸€é¡µ)@href');\n\t\t\t\tlet xyy2 = xyy.match(/\\d+\\/\\d+/) || '';\n\t\t\t\tif (cid.includes(xyy2)) {\n\t\t\t\t\tif (/_\\d+\\.html/.test(xyy)) xyy = cdx + xyy;\n\t\t\t\t\telse xyy = '';\n\t\t\t\t\tresult = java.getElement('#chapterContent');\n\t\t\t\t\tresult.select('a').remove();\n\t\t\t\t\tif (result == '' && bin == cin) java.toast('\\nç¯±ç¬†å¥½æ­£æ–‡é“¾æ¥è®¿é—®å¼‚å¸¸');\n\t\t\t\t} else { java.toast('\\nç¯±ç¬†å¥½èµ„æºæš‚æœªæ›´æ–°'); result = xyy = ''; }\n\t\t\t}\n\t\t\telse if (pjfs == 5) {\n\t\t\t\t//ä¸‡ç›¸ä¹¦åŸ\n\t\t\t\txyy = gets('a:contains(ä¸‹ä¸€é¡µ)@href');\n\t\t\t\tif (xyy.includes('_')) xyy = cdx + xyy;\n\t\t\t\telse xyy = '';\n\t\t\t\tresult = gets('#cont-body@html');\n\t\t\t\t\n\t\t\t\t} else { java.toast('âŒ'); }\n\n\t\t\t//æ ¼å¼htmlï¼Œæ–¹ä¾¿å‡€åŒ–\n\t\t\tresult = java.htmlFormat(gets('@html', result));\n\t\t\tresult = String(result);\n\t\t}\n\t\t//ä¸‹ä¸€é¡µ\n\t\tjava.put('xyy', xyy);\n\n\t\tif (pjfs == 1) {\n\t\t\t//ç¬”è¶£é˜å‡€åŒ–\n\t\t\tresult = result.replace(/\\s*ï¼ˆ.*é˜…è¯»æ¨¡å¼.*ï¼‰\\s*|\\s*è¯·æ”¶è—.*\\.(?:com|cc|icu|cfd)/g, '').replace(/([ä¸€-ê€€])$/, '$1ğŸ­');\n\t\t} else if (pjfs == 2) {\n\t\t\t//69ä¹¦å§å‡€åŒ–\n\t\t\tlet z1 = '[ä¸€âŠ¥]+';\n\t\t\tlet zz = new RegExp(`^[^ï¼Œã€‚ï¼Ÿâ€œâ€]{0,19}[6å…­]${z1}[9ä¹]${z1}ä¹¦${z1}å§[^ï¼Œã€‚ï¼Ÿâ€œâ€]{0,9}\\$`, 'gm');\n\t\t\tresult = result.replace(zz, '');\n\t\t\t//69ç¹ä½“ç«™\n\t\t\tif (/69shux\\.co/.test(pji)) {\n\t\t\t\tlet z2 = `[^\\\\sa-zï¼Œã€‚ï¼Ÿï¼ï¼šï¼›â€¦ï½â€œâ€ã€ï¼ˆï¼‰â€”â€˜â€™Â·ã€Šã€‹ï¿¥ã€ˆã€‰ã€ã€‘ã€–ã€—ã€ã€ã€Œã€ï¼,?!:;â€¦~'\"ä¸€-ê€€]|[ä¹‚çˆª]`;\n\t\t\t\tlet z3 = \"\\\\.*\";\n\t\t\t\tlet zz = new RegExp(`è¯·${z3}æ‚¨${z3}æ”¶${z3}è—${z3}6${z3}9${z3}ä¹¦${z3}å§${z3}ï¼|(?:${z2})(?:${z2}|[^\\\\S\\\\n]){6,}|^[^ï¼Œã€‚ï¼Ÿâ€œâ€]{0,9}é¦–${z1}å‘${z1}å†…${z1}å®¹[^ï¼Œã€‚ï¼Ÿâ€œâ€]{0,19}\\$`, 'gmi');\n\t\t\t\tresult = result.replace(zz, '');\n\t\t\t}\n\t\t} else if (pjfs == 4) {\n\t\t\t//ç¯±ç¬†å¥½å‡€åŒ–\n\t\t\t//\tlet fh=String.raw`[ä¸€-ê€€\\sâ€œâ€˜ï¼Œã€‚ï¼Ÿï¼ï¼šï¼›â€¦â€”ï½~ã€â€™â€\"']`;\n\t\t\tlet l1 = \"(?:ç¯±|li).{0,2}\",\n\t\t\t\tl2 = \"(?:ç¬†|ba).{0,2}\",\n\t\t\t\tl3 = \"(?:å¥½|hao).{0,2}\",\n\t\t\t\tl4 = \"(?:[æ–‡å»]|wen).{0,2}\",\n\t\t\t\tl5 = \"(?:å­¦|xue).{0,2}\",\n\t\t\t\tl6 = \"(?:[å¥½æ–‡å»å­¦]|hao|wen|xue).{0,2}\";\n\t\t\tlet zz = new RegExp(String.raw`([^ä¸€-ê€€])(?:</.{0,2})?(?:${l1 + l2}(?:${l6}){0,3}|${l2 + l3}(?:${l6}){0,2}|${l3 + l4}(?:${l6})?|${l4 + l5})$|${l1 + l2 + l3}(?:${l6}){0,2}$|</.{0,2}[ç¯±ç¬†å¥½æ–‡å­¦]>$`, 'gmi');\n\t\t\tresult = result.replace(zz, '$1');\n\t\t}\n\n\t\t//å‡€åŒ–æ ‡é¢˜\n\t\tlet jh = source.get('zså‡€åŒ–æ ‡é¢˜');\n\t\tif (jh == 1 && cnm && result) {\n\t\t\tlet zz = new RegExp(String.raw`^\\s*(?:${book.name}.*)?(?:</ins>\\s*)?.{0,19}${cnm}(?:.{0,9}(?:[ï¼ˆ(ã€].{0,39}[ã€‘)ï¼‰])?\\n)?`);\n\t\t\tresult = result.replace(zz, '');\n\t\t}\n\t\t//pjfs>0ç»“æŸ\n\t}\n\t//ä»˜è´¹ç« èŠ‚ç»“æŸ\n}\nelse {\n\t//å…è´¹ç« èŠ‚\n\tlet url2 = QDSign(\"v2/bookcontent/safegetcontent\", [\"bookId=\" + bkid, \"chapterId=\" + zcid, \"fineLayout=0\"]).split(/^([^,]+),/);\n\t//url2=QDSign(\"v4/bookcontent/getvipcontent\",[\"b=\"+bkid,\"c=\"+zcid,\"ui=0\",\"b-string=\"]);\n\tlet byt = '', zwr = '';\n\ttry {\n\t\t//ä¸‹æ¶ä¹¦ç±ä¸è®¿é—®åŠ å¯†é“¾æ¥\n\t\tif (java.get('yxj') == 1) url2 = ['', '', ''];\n\t\tbyt = java.get(url2[1], JSON.parse(url2[2]).headers).bodyAsBytes();\n\n\t\t//è§£å¯†\n\t\tzwr = ZWjj(byt, zcid);\n\t} catch (err) {\n\t\t//VIPçš„æƒ…å†µä¸º403ï¼Œå¦åˆ™æç¤ºå‡ºé”™\n\t\tif (String(err).includes('Status=403')) {\n\t\t\t//ç›´æ¥ç”¨ä»˜è´¹é“¾æ¥å†è®¿é—®\n\t\t\turl2 = QDSign(\"v2/subscription/getvipprice\", [\"bookId=\" + bkid, \"chapterId=\" + zcid, \"fineLayout=0\"]).split(/^(.+?),/);\n\t\t\tbyt = java.get(url2[1], JSON.parse(url2[2]).headers).body();\n\t\t\tzwr = `{Content:'${gets('$..Summary', byt)}'}`;\n\t\t\tbook.putVariable(\"uvip\" + zcid, 2);\n\t\t} else {\n\t\t\tjava.longToast('ğŸ’”è®¿é—®åŠ å¯†é“¾æ¥å¼‚å¸¸');\n\t\t\tjava.log('è§£å¯†å¼‚å¸¸æ—¥å¿—ï¼š\\n' + err);\n\t\t\tbook.putVariable(\"uvip\" + zcid, '');\n\t\t\tzwr = \"{}\";\n\t\t}\n\n\t}\n\n\tif (zcid < 0) {\n\t\t//æ‰‰é¡µ\n\t\tbook.imageStyle = '';\n\t\t//è·å–å¤´åƒ\n\t\tlet auim = String(java.get('auim')).replace(/100$/, '200');\n\t\t//è·å–ä½œè€…ç®€ä»‹\n\t\tlet aude = java.get('aude');\n\t\tif (aude.length() > 0)\n\t\t\taude = aude\n\t\t\t\t.replaceAll(',', 'ï¼Œ').replaceAll('ã€‚ï¼Œ', 'ã€‚')\n\t\t\t\t.replaceAll('ä½œå“ï¼Œè‘—æœ‰', 'ã€') + 'ã€‚';\n\t\tlet atw = gets('$..AuthorWords', zwr);\n\t\tlet bks = gets('$..BookStatus', zwr);\n\t\tlet lx = gets('$..CategoryName', zwr);\n\t\tlet zs = gets('$..WordsCnt', zwr);\n\t\tlet zsz = 'ä¸‡å­—';\n\t\tif (zs > 999999) zs = (zs / 10000).toFixed(0);\n\t\telse if (zs > 99999) zs = (zs / 10000).toFixed(1);\n\t\telse if (zs > 9999) zs = (zs / 10000).toFixed(2);\n\t\telse zsz = 'å­—';\n\t\tlet zz = gets('$..Author', zwr);\n\t\tlet sj = gets('$..PunishTime', zwr);\n\t\tlet tag = gets('$..Tags..Name', zwr).replaceAll('\\n', 'ã€€');\n\t\tlet hz = (aude + tag).length;\n\t\ttag = hz < 39 ? tag + \"\\n\\u200b\\n\".repeat(3) :\n\t\t\thz < 50 ? tag + \"\\n\\u200b\\n\".repeat(2) :\n\t\t\t\thz < 99 ? tag + \"\\n\\u200b\\n\" : tag + \"\\n\";\n\t\tlet bkurl = String(book.bookUrl).replace(/.+,(.+),.+/, '$1');\n\t\tresult = zwzs(bkid, zcid, [auim, aude, atw, bks, lx, zs, zsz, zz, sj, tag, bkurl]);\n\n\t} else {\n\t\t//æ­£å¸¸å…è´¹ç« \n\t\t//è·å–å›¾ç‰‡\n\t\tlet imu = com.jayway.jsonpath.JsonPath.read(zwr, '$..Blocks[*]');\n\t\tresult = gets('$..Content', zwr);\n\t\tlet dpkg = source.get('zsæ®µè¯„') == 1;\n\t\tlet tpxs = imu != [];\n\t\tif (dpkg||tpxs) result = String(result).split(/\\r?\\n/);\n\t\tif (dpkg) {\n\t\tlet dpurl = QDSign(\"v1/chapterreview/getchapterrepagesummary\", [\"bookId=\" + bkid, \"chapterId=\" + zcid, \"useImei=0\"]);\n\t\tlet dprr = jiesuo(dpurl,bkid,0,zcid);\n\t\ttry {result = dpcl(dprr, result);} catch(e) {java.longToast('æ®µè¯„åŠ è½½å¼‚å¸¸');java.log('æ®µè¯„åŠ è½½å¼‚å¸¸'+e);}\n\t\t//æ®µè¯„ç»“æŸ\n\t\t}\n\n\t\tif (tpxs) {\n\t\t\tfor (let ii = 0; ii < imu.length; ii++) {\n\t\t\t\tlet i = imu[ii].Attach;\n\t\t\t\tlet zssj = cache.get('zssj').split(',')[1];\n\t\t\t\tresult[i] = `<img src=\"${imu[ii].Url},{User-Agent:'Dalvik/2.1.0 (Linux; U; Android 10; ${zssj} Build/UKQ1.230924.001)'}\">` + (result[i] || '');\n\t\t\t}\n\t\t//å›¾ç‰‡ç»“æŸ\n\t\t}\n\t\tif (dpkg||tpxs) {\n\t\tlet s = '';\n\t\tresult.forEach(x => { s += x + '\\n' });\n\t\tresult = s;\n\t\t}\n\t}\n\t//å‡€åŒ–æ­£ç‰ˆ\n\tresult = result.replace(/(ï¼Œ[ä¸€-ê€€]+)\\n/, '$1ã€‚\\n');\n\t//å…è´¹ç« èŠ‚ç»“æŸ\n}\nresult",
    "nextContentUrl": "@js:\nvar xyy=java.get('xyy');\nif (xyy=='') result=[];\nelse\nresult=`data:page;base64,${java.base64Encode(xyy)},{\"type\":\"lyc\"}` ;",
    "payAction": "//ç ´è§£ï¼Œè·å–ä¹¦ç±å˜é‡\nlet bkbl = book.getVariable(\"custom\")+[];\nresult = 3;\njava.toast('ç¨ç­‰');\nresult=jiesuo(bkbl);\nif (result==='')\njava.longToast('\\nè¯·åˆ°èµ·ç‚¹APPè§‚çœ‹');\n\nif (result > 1) {\nlet bknm=String(book.name);\nlet bkau=String(book.author).replace('\\u200b','');\n//æœç´¢\nlet pjs = loading(bknm);\nlet pjl = pjs.find(x => x.articlename==bknm && x.author==bkau);\nPackages.java.lang.Thread.sleep(300);\n\n//ç›®å½•é“¾æ¥ï¼Œæ”¹ã€‚æ²¡æœ‰ï¼Œä¸åŠ è½½\nif (pjl) {\njava.toast('\\nå·²æ‰¾åˆ°ç›¸åº”ä¹¦ç±');\nlet head={\n\t'User-Agent': u_a,\n\t'Accept-Language': a_l,\n\t'Referer': s__u\n};\n\nlet s__us=[\"96fd80d.sbs\",\"15d476280.xyz\",\"b26d7.icu\",\"86f2a.cfd\",\"e191e0efa5.cfd\"];\n\nlet ii=s__us[0];\nlet urls=s__us.reverse();\nlet aly = new JavaImporter(\n\tPackages.org.jsoup.Jsoup,\n\tPackages.org.jsoup.Connection);\nfor(let url of urls) {\n\tlet i=0;\n\ttry {\n\twith (aly) {\n\t\ti=Jsoup.connect('https://m.'+url+'/favicon.ico')\n.timeout(1200)\n.ignoreContentType(true)\n.followRedirects(false)\n.method(Connection.Method.HEAD)\n.execute().statusCode()\n\t}\n\tif (i>199&&i<400) {ii=url;java.toast('è®¿é—®ç›®å½•é¡µ'); break;}\n\t} catch(err) {java.toast('\\n'+url+'\\næ— æ³•è®¿é—®ï¼Œå°è¯•ä¸‹ä¸€ä¸ª');}\n}\nlet ck1= 'getsite='+ii;\n\nlet pjml=gethd(s__u+String(pjl.url_list).replace(/read/,\"userverify/$&\")+'list.html',ck1);\nlet pjr = java.ajaxAll([pjml])[0];\n\nlet pp = pjr.url();\nbook.putVariable(\"cdx\", pp.match(/https:\\/\\/[^\\/]+/)[0]);\npjr = org.jsoup.Jsoup.parse(pjr.body());\npjr = pjr.select('dl dd~dd a');\nlet pjrcd=pjr.length;\nif (pjrcd>book.totalChapterNum*3/5) {\n\tjava.log('è§£é”ç»“æœï¼š\\n'+pjr);\n\tbook.putVariable(\"zspj\",pjr);\n\tbook.putCustomVariable('ç¬”è¶£é˜ï¼š'+pp);\n\tjava.toast('ç¬”è¶£é˜è§£é”æˆåŠŸ');\n\tresult=1;\n\t} else {\n\t\tjava.log('å†…å®¹è¿‡å°‘ï¼Œè§£é”åœ°å€ï¼š\\n'+pjml);\n\t\tjava.longToast('ğŸ˜«ç»“æœåªæœ‰'+pjrcd+'ç« ');\n\t\tresult=0;\n\t\t}\n} else {java.toast('ç¬”è¶£é˜è§£é”å¤±è´¥');result=0;}\n//ç¬”è¶£é˜ifç»“æŸ\n}\nresult",
    "replaceRegex": "##ğŸ­(?:\\n|$)|\\(æœ¬ç« å®Œ\\)(?:$|<img)@js:\nlet dprr = java.get(\"dp\");\nif (dprr.length() > 0) {\n    result = String(result).split(/\\r?\\n/);\n    try {\n        result = dpcl(dprr, result);\n    } catch (e) {\n        java.longToast('æ®µè¯„åŠ è½½å¼‚å¸¸');\n        java.log('æ®µè¯„åŠ è½½å¼‚å¸¸' + e);\n    }\n    let s = '';\n    result.forEach(x => {\n        s += x + '\\n'\n    });\n    result = s;\n}\nlet zcid = java.get('cid');\nif (source.get('zsæœ¬ç« è¯´') == 1 && !zcid.startsWith('å½©') && !chapter.isVolume() && result)\n    result += zwzs(java.get('bkid'), zcid);\nresult",
    "title": "@js:java.get('btdp')"
  },
  "ruleExplore": {
    "author": "<js>\nlet bj=java.get('bj');\n//è®¿é—®èµ·ç‚¹\nif (/^[^â‘¤â‘¥è¯„å•â–³å£¹è´°]$/.test(bj)) {\n\tlet bkid = java.get('bkid');\n\tvar re=cache.get('zs'+bkid);\n\tlet tm=100; //æœ€ä½å»¶æ—¶\n\tif (!re) {\n\tlet url=QDSign(\"v3/bookdetail/get\", [\"bookId=\"+bkid,\"isOutBook=0\"]);\n\tre = java.ajax(url);\n\t//é˜²æ­¢è®¿é—®é¢‘ç¹\n\tlet ppage=cache.getFromMemory('zsfxpage')||1;\n\ttm = ppage<7 ? ppage*100 : 10;\n\tcache.put('zs'+bkid,re,8640);}\n\tPackages.java.lang.Thread.sleep(tm); //é˜²æ­¢è¿‡å¿«å“åº”å¯¼è‡´pageå˜åŒ–æ²¡è·Ÿä¸Šï¼ˆä»æœ‰æä½æ¦‚ç‡ï¼‰\n\t}\n\nif (bj=='â‘ '||bj=='â‘¡') {\n\tresult = gets('td.1@a.0@text');\n\t}\nelse if (/^[â‘¢â‘£â‘¥â‘¦]$/.test(bj)) {\n\tresult = gets('td.3@a.0@text');\n\t}\nelse if (bj=='â‘¤') {\n\tresult = gets('td.7@a.0@text');\n\t}\nelse if (/^[â… â…¡â…¢â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸]$/.test(bj)) {\n\tresult = gets('$.*.AuthorInfo.Author',re);\t\n\t}\nelse if (/^[â…£â…¤]$/.test(bj)) {\n\tresult = gets('td.4@a.0@text');\n\t}\nelse if (/^[â…«]$/.test(bj)) {\n\tresult = gets('td.5@a.0@text');\n\t}\nelse if (/^[å„„]$/.test(bj)) {\n\tresult = gets('td.2@a.0@text');\n\t}\nelse if (/^[è¯„å•â–³å£¹è´°]$/.test(bj)) {\n\tresult=gets('$.AuthorName||BookAuthor||Author');\n\t}\n\nif(source.get('zzs')==1) result='\\u200b'+result;\nresult\n</js>",
    "bookList": "@js:\nlet ly = java.hexDecodeToString(src).split(',');\nlet bj=ly[0],ppage = ly[1];\ncache.putMemory('zsfxpage',ppage);\nlet url=qdturl+'/';\nlet ysr='';\nswitch(String(bj)) {\n\tcase 'â‘ ': url=gethd(url+'touzi/');break;\n\tcase 'â‘¡': url=gethd(url+'dashenxinshu/');break;\n\tcase 'â‘¢': url=gethd(url+'qianli/');break;\n\tcase 'â‘£': url=gethd(url+'qianlilv1/');break;\n\tcase 'â‘¤': \n\tif (ppage==1) try {\n\t\tlet svg=`<svg width=\"990\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\">\n<text font-size=\"50\" fill=\"#${color()}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#161823\" stroke-width=\"1\" font-weight=\"bold\">\n<tspan x=\"50%\" y=\"30%\" font-size=\"100\">\nè¾“å…¥æŸ¥è¯¢çš„æ—¶é—´\n</tspan>\n<tspan x=\"50%\" y=\"60%\">\nä¾‹å¦‚25 2ã€2024-01-15ç­‰\n</tspan>\n</text>\n</svg>`;\n\t\tysr=java.getVerificationCode(`data:image/svg+xml;base64,${java.base64Encode(svg)}`);\n\t\tysr=(ysr+'').replace(/^\\d{0,2}(\\d{2})\\D(\\d{1,2})\\D?(\\d{1,2})?$/, (mt, p1, p2, p3)=>{\n\t\t\tp1=p1<30?('20'+p1):'2025';\n\t\t\tp2=p2<13?p2.padStart(2, '0'):'02';\n\t\t\tp3=p3<32?('-'+p3.padStart(2, '0')):'';\n\t\t\treturn p1+'-'+p2+p3;\n\t\t\t});\n\t\t\tif (!/^\\d{4}-[\\d\\-]{2,5}$/.test(ysr)) ysr='';\n\t\t} catch(err) {ysr='';}\n\t\turl=gethd(url+'shouding/'+ysr);\n\t\tbreak;\n\tcase 'â‘¦': url=gethd(url+'reader/');break;\n\tcase 'â… ': url=gethd(url+'badge/rongyao_1');break;\n\tcase 'â…¡': url=gethd(url+'badge/rongyao_2');break;\n\tcase 'â…¢': url=gethd(url+'badge/rongyao_3');break;\n\tcase 'â…£': url=gethd(url+'badge/rongyao_4');break;\n\tcase 'â…¤': url=gethd(url+'badge/rongyao_5');break;\n\tcase 'â…«': url=gethd(url+'badge/twelvekings');break;\n\tcase 'â…°': url=gethd(url+'badge/jingpinpindao');break;\n\tcase 'â…±': url=gethd(url+'badge/rijindoujin');break;\n\tcase 'â…²': url=gethd(url+'badge/rigengwanzi');break;\n\tcase 'â…³': url=gethd(url+'badge/wanrenzhuipeng');break;\n\tcase 'â…´': url=gethd(url+'badge/xiezhulongen');break;\n\tcase 'â…µ': url=gethd(url+'badge/wanzhongyixin');break;\n\tcase 'â…¶': url=gethd(url+'badge/baimengzhengba');break;\n\tcase 'â…·': url=gethd(url+'badge/shoudingguowan');break;\n\tcase 'â…¸': url=gethd(url+'badge/yuepiaodiyi');break;\n\tcase 'å£¹': url=QDSign(\"v1/booksquare/getsjrecommend\",[\"groupId=1\",\"pageIndex=\"+ppage]);break;\n\tcase 'è´°': url=QDSign(\"v1/booksquare/getsjrecommend\",[\"groupId=4\",\"pageIndex=\"+ppage]);break;\n\tcase 'å„„': \n\t\tlet tm = java.timeFormatUTC(Date.now(),\"yyyy-MM-dd\",28800000-2*60*60*1000);\n\turl=gethd(url+'bang/1/'+tm);break;\n\tcase 'è¯„':\n\tif (ppage==1) {try {\n\t\tlet svg=`<svg width=\"990\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\">\n<text font-size=\"50\" fill=\"#${color()}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#161823\" stroke-width=\"1\" font-weight=\"bold\">\n<tspan x=\"50%\" y=\"30%\" font-size=\"100\">\nè¯·è¾“å…¥ä¹¦ç±ID\n</tspan>\n<tspan x=\"50%\" y=\"60%\">\nå¯åœ¨ä¹¦ç±è¯¦æƒ…é¡µå¤åˆ¶\n</tspan>\n</text>\n</svg>`;\n\t\tysr=java.getVerificationCode(`data:image/svg+xml;base64,${java.base64Encode(svg)}`);\n\t\tysr=ysr.match(/\\d{3,}/)[0];\n\t\tif (!ysr) throw 'empty';\n\t\t} catch(err) {ysr='';}\n\t\tsource.put('zsysr',ysr);}\n\telse ysr=source.get('zsysr');\n\tif (ysr!='') {\t\t\n\t\turl=QDSign(\"v1/booklist/getrelation\",[\"bookId=\"+ysr,\"page=\"+ppage,\"size=20\",\"type=2\",\"isRecommended=1\"]);\n\t\t} else url='';\n\t\tbreak;\n\tcase 'å•':\n\tif (ppage==1) {try {\n\t\tlet svg=`<svg width=\"990\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\">\n<text font-size=\"50\" fill=\"#${color()}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#161823\" stroke-width=\"1\" font-weight=\"bold\">\n<tspan x=\"50%\" y=\"30%\" font-size=\"100\">\nè¯·è¾“å…¥ä¹¦å•ID\n</tspan>\n<tspan x=\"50%\" y=\"60%\">\nå¯é€šè¿‡ æŸ¥çœ‹ä¹¦è¯„ è·å¾—\n</tspan>\n<tspan x=\"50%\" y=\"90%\" font-size=\"40\">\nä¸ºç©ºæ—¶ä½¿ç”¨éšæœºä¹¦å•\n</tspan>\n</text>\n</svg>`;\n\t\tysr=java.getVerificationCode(`data:image/svg+xml;base64,${java.base64Encode(svg)}`);\n\t\tysr=ysr.match(/\\d{3,}/)[0];\n\t\tif (!ysr) throw '0';\n\t\t} catch(err) {\n\t\t\tlet tt=Math.random()*9|0;\t\n\t\t\tlet url=qdturl+'/booklists/'+(tt?(tt+'/'):'');\n\t\t\tlet rr=java.ajax(gethd(url));\n\t\t\trr=(rr+'').match(/booklist\\/\\d{3,}/g);\n\t\t\ttt=Math.random()*rr.length|0;\n\t\t\tysr=rr[tt].match(/\\d{3,}/)[0];}\n\t\tsource.put('zsysr',ysr);}\n\telse ysr=source.get('zsysr');\n\tif (ysr!='') {\n\t\turl=QDSign(\"v1/booklist/getBookListDetail\",[\"bookListId=\"+ysr,\"page=\"+ppage,\"size=20\",\"selectedBookId=0\"]);\n\t\t} else url='';\n\t\tbreak;\n\tcase 'â–³':\n\tif (ppage==1) {\n\ttry {\n\tvar webr=java.startBrowserAwait('https://qdzs.lyc','é€‰æ‹©åˆ†ç±»',false,html()).body();\n\t} catch(err) {if (err.message.includes('éªŒè¯ç»“æœä¸ºç©º')) webr=html();}\n\tlet flfl1=gets('#flfl1@text',webr);\n\tlet flfl2=gets('#flfl2@text',webr);\n\tsource.put('zsysr',[flfl1,flfl2]);\n\t}\n\t\tlet [flfl1,flfl2]=source.get('zsysr').split(',');\n\t\tif (/å¹´æ¦œæœˆç¥¨$/.test(flfl1)) {\n\t\t\turl=QDSign(\"v2/historyBooks/get\",[\"site=11\",\"topId=0\",\"monthId=0\",\"categoryId=-1\",\"version=\",\"pageIndex=\"+ppage,\"pageSize=20\"]);\n\t\t\t}\n\t\telse {\n\t\tflfl1=duiz1[flfl1];\n\t\tflfl2=duiz2[flfl2]||\"-1\";\n\turl=QDSign(\"v3/topBooks/get\",[\"site=11\",\"topId=\"+flfl1,\"categoryId=\"+flfl2,\"version=\",\"pageIndex=\"+ppage,\"pageSize=20\"]);}\n\t\tbreak;\n\tdefault: url='';}\n\n//è®¿é—®\nif (/^[è¯„å•â–³å£¹è´°]$/.test(bj)) {\n\tif (url=='') {result=[{}];} else {\n\t\tresult = java.ajax(url);\n\t\tjava.setContent(result);\n\t\tresult = java.getElement('$.Data[\"BookLists\",\"Books\",\"RankBookList\",\"BookList\",\"BookInfos\"][*]');}\n\t}\nelse {\n\nif (ppage ==1 ) {\n\tif (/^\\d+-\\d+$/.test(ysr)) {\tbj = 'â‘¥';}\n\telse if (/^\\d{4}\\-\\d{2}\\-\\d{2}$|^$/.test(ysr)) {}\n\telse {url='';\n\tPackages.java.lang.Thread.sleep(500);\n\tjava.longToast('\\nè¯·è¾“å…¥æ­£ç¡®æ ¼å¼çš„æ—¶é—´');}\n\tresult = java.ajax(url);\n\tresult = org.jsoup.Jsoup.parse(result);\n\tresult.select('tr:has(#ad-slot),head').remove();\n\tresult=result.select('tbody tr');\n\tcache.put('qdzsrs',`<table>${result}</table>`);}\n\t\n\tresult = cache.get('qdzsrs');\n\tresult = org.jsoup.Jsoup.parse(result);\n\tif (bj=='â‘¤'||bj=='â‘¥') {\n\t\tresult = ppage>1 ? [] : result.select('tr');}\n\telse {\n\t\t// java.log('p'+ppage); //å¿«é€Ÿç¿»é¡µæ—¶æ¦‚ç‡pageä¸å˜\n\t\tresult = result.select(`tr:eq(${ppage-1})`);}\n}\n\n\njava.put('bj',bj);\nresult",
    "bookUrl": "<js>\nlet bj=java.get('bj');\nif (bj=='â‘ '||bj=='â‘¡')\nresult = gets('td.0@a.1@href');\nelse result = 'https://m.qidian.com/book/'+java.get('bkid');\n`data:page;base64,${java.base64Encode(result)},{\"type\":\"lyc\"}` \n</js>",
    "coverUrl": "<js>\nlet bj=java.get('bj');\nif (/^è¯„$/.test(bj)) {\nlet time=gets('$.UpdateTime');\ntime=java.timeFormat(time);\nlet sc=gets('$.CollectCount');\nsc = sc>9999 ?\n'â­ '+(sc/10000).toFixed(1)+'ä¸‡' :\nsc>9 ?\n'â­ '+sc :\n'';\nlet cf='';\ntry {\n\tcf=source.getLoginInfoMap().get('å­—ä½“é¢œè‰²');\n\tif (cf=='') throw 'ç©º';\n\t} catch(cerr) {cf='f2fdff';}\nlet svg = `<svg width=\"600\" height=\"800\" xmlns=\"http://www.w3.org/2000/svg\">\n<text fill=\"#${cf}\" text-anchor=\"middle\" dominant-baseline=\"middle\" stroke=\"#161823\" stroke-width=\"1\" font-weight=\"bold\">\n<tspan x=\"50%\" y=\"10%\" font-size=\"80\">\n${time}\n</tspan>\n<tspan x=\"50%\" y=\"50%\" font-size=\"90\">\n${sc}\n</tspan>\n</text>\n</svg>`;\nsvg=java.base64Encode(svg);\nresult='data:image/svg+xml;base64,'+svg;\n} else {\nlet bkid = java.get('bkid');\nresult='https://qidian.qpic.cn/qdbimg/349573/'+bkid+(/^[â‘¤â‘¥è¯„å•â–³å£¹è´°]$/.test(bj)?'/180':'/600');}\n\nresult\n</js>",
    "intro": "<js>\nlet bj=java.get('bj');\nif (bj=='â‘¤') {\n\tresult = java.getStringList('td.4@b@ownText&&td[6]@ownText');\n\tlet vtm=gets('td.-1@value');\n\tresult = 'ç²‰ä¸:'+result[1]+'\\næ”¶è®¢æ¯”:'+result[0]+'\\né¦–Væ—¶åˆ»:'+vtm;\n}\nelse if (bj=='â‘¥') {\n\tresult = java.getStringList('td.-3@b@ownText&&td.-4@ownText');\n\tlet vtm=gets('td.-1@value');\n\tresult = 'ç²‰ä¸:'+result[1]+'\\næ”¶è®¢æ¯”:'+result[0]+'\\né¦–Væ—¶åˆ»:'+vtm;\n}\nelse if (/^è¯„$/.test(bj)) {\n\tlet jj=gets('$.Des');\n\tlet sl=gets('$.BookCount');\n\tlet bkid = java.get('bkid');\n\tresult=gets('$.BookIntroWords');\n\tjj='ä¹¦è¯„ï¼š\\n'+result+'\\n\\u200b\\n\\u200b\\nä¹¦å•ä»‹ç»ï¼š\\n\\u200fæœ¬ä¹¦å•ï¼ˆ'+bkid+'ï¼‰æœ‰'+sl+'æœ¬ä¹¦\\n\\u200b\\n'+jj;\n\tjava.put('bkjianjie',jj);\n\t}\nelse if (/^å•$/.test(bj)) {\n\tresult=gets('$.BookIntroWords');\n\tlet bkid = java.get('bkid');\tcache.putMemory('zsjjl'+bkid,'ä¹¦è¯„ï¼š\\n'+result+'\\n\\u200b\\n\\u200b\\n');\n\t}\nelse if (/^[â–³å£¹è´°]$/.test(bj)) {\n\t\tresult=gets('$.Description');\n\t\tif (!result) {\n\t\t\tlet bkid = java.get('bkid');\n\t\t\tlet rr = cache.get('zs'+bkid);\t\n\t\t\tresult = rr&&gets('$.*.BaseBookInfo.Description',rr);}\n\t}\nelse {\n\tlet bkid = java.get('bkid');\n\tresult = cache.get('zs'+bkid);\t\n\tresult = gets('$.*.BaseBookInfo.Description',result).replaceAll('\\n','ã€€');\n}\nresult\n</js>",
    "kind": "<js>\nlet bj=java.get('bj');\nif (bj=='â‘ '||bj=='â‘¡') {\n\tresult = java.getStringList('td[0,2,4,5]@ownText');\n\t//æ”¶è—æ•°\n\tlet sc = result[2];\n\tsc = sc>9999 ? \t(sc/10000).toFixed(1)+'ä¸‡' : sc;\n\t//æ¨èæ•°\n\tlet bkid = java.get('bkid');\n\tlet rr = cache.get('zs'+bkid);\t\n\t\tlet tj = gets('$.*.BaseBookInfo.RecommendAll',rr);\n\ttj = tj>9999 ? \t'â–³'+(tj/10000).toFixed(1)+'ä¸‡' : 'â–³'+tj;\n\tresult = [result[0].match(/^\\[(.+)\\]/)[1],result[1],`${tj}`,`â˜†${sc}`];\n\t}\nelse if (bj=='â‘¢'||bj=='â‘£') {\n\tresult = java.getStringList('td[1,2,3,5]@ownText');\n\tresult = [result[1].slice(1,-1),result[2].slice(1,-1),'â—'+result[0],'â˜†'+result[3].replace('w','ä¸‡')];\n\t//å»é™¤æ— æ„ä¹‰1çº§\n\tif (bj=='â‘£') result.splice(1,1);\n\t}\nelse if  (bj=='â‘¤') {\n\tresult = java.getStringList('td[1,3,7]@ownText');\n\tlet vv = gets('td.2@b@ownText||td.2@font@ownText');\n\tresult = [result[0].slice(1,-1),result[2],'ğŸ“Œ'+vv,'â˜†'+result[1].replace('w','ä¸‡')];\n\t}\nelse if  (bj=='â‘¥') {\n\tresult = java.getStringList('td[1,4,5]@ownText');\n\tlet vv = gets('td.2@b@ownText||td.2@font@ownText');\n\tresult = [result[0].slice(1,-1),result[1],'ğŸ“Œ'+vv,'â˜†'+result[2].replace('w','ä¸‡')];\n\t}\nelse if  (bj=='â‘¦') {\n\tlet pm = java.getStringList('td[0,1]@text');\n\tlet bkid = java.get('bkid');\n\tresult = cache.get('zs'+bkid);\t\n\tlet lx=gets('$.*.BaseBookInfo.CategoryName',result);\n\tlet aul=gets('$.*.AuthorInfo.AuthorLevel');\n\tlet tj=gets('$.*.BaseBookInfo.RecommendAll',result);\n\ttj = tj>9999 ? \t'â–³'+(tj/10000).toFixed(1)+'ä¸‡' : 'â–³'+tj;\n\tresult=['#'+pm[0],pm[1],lx,aul,tj];\n\t}\nelse if (/^[â… â…¡â…¢â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸]$/.test(bj)) {\n\t//èµ·ç‚¹æ•°æ®\n\tlet bkid = java.get('bkid');\n\tresult = cache.get('zs'+bkid);\t\n\tlet lx=gets('$.*.BaseBookInfo.CategoryName',result);\n\tlet aul=gets('$.*.AuthorInfo.AuthorLevel',result);\n\tlet tj=gets('$.*.BaseBookInfo.RecommendAll',result);\n\ttj = tj>9999 ? \t'â–³'+(tj/10000).toFixed(2)+'ä¸‡' : tj>0 ? 'â–³'+tj : '';\n\tresult=[lx,aul,tj];\n\t}\nelse if  (/^[â…£â…¤]$/.test(bj)) {\n\tresult = java.getStringList('td[1,2,3]@ownText');\n\tresult = [result[0].slice(1,-1),result[2],'ç²‰ä¸:'+result[1].replace('w','ä¸‡')];\n\t}\nelse if  (bj=='â…«') {\n\tresult = java.getStringList('td[1:4]@ownText');\n\tresult = [result[0],result[1].slice(1,-1),result[3],'ç²‰ä¸:'+String(result[2]).replace(/\\dw$/,'ä¸‡')];\n\t}\nelse if  (bj=='å„„') {\n\tresult = java.getStringList('td[1,3,4,5]@ownText');\n\t\tlet sc = result[2];\n\tsc = sc>9999 ? \t(sc/10000).toFixed(1)+'ä¸‡' : sc;\n\tlet fs = result[3];\n\tfs = fs>9999 ? \t(fs/10000).toFixed(1)+'ä¸‡' : fs;\n\t\n\tresult = [result[0].slice(1,-1),result[1],`â˜†${sc}`,`ç²‰ä¸:${fs}`];\n\t}\nelse if (/^[è¯„å•]$/.test(bj)) {\n\tresult='';\n\t}\nelse if (/^[â–³å£¹è´°]$/.test(bj)) {\n\tlet non=gets('$.TopNo');\n\tlet yps=gets('$.ExtraValue');\n\typs = yps>9999 ? (yps/10000).toFixed(2)+'ä¸‡ç¥¨,' : yps>0 ? yps+'ç¥¨,' : '';\n\tresult=(non?'#'+non+',':'')+yps+gets('$.CategoryName');\n\t}\n\nresult\n</js>",
    "lastChapter": "<js>\nlet bj=java.get('bj');\nif (/^[â‘ â‘¡â… â…¡â…¢â…£â…¤â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸]$/.test(bj))\nresult = gets('td.-1@text');\nelse result='';\nresult\n</js>",
    "name": "<js>\ntry{\nlet bj=java.get('bj');\nlet bkid;\nif (/^[â‘ â‘¡â… â…¡â…¢â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸]$/.test(bj)) {\n\tresult = gets('td.0@a.0@text');\n\tbkid = gets('td.0@a.0@href');\n\t}\nelse if (/^[â‘¢â‘£â‘¦â…«]$/.test(bj)) {\n\tresult = gets('td.2@a.0@text');\n\tbkid = gets('td.2@a.0@href');\n\t}\nelse if (/^[â‘¤â‘¥â…£â…¤å„„]$/.test(bj)) {\n\tresult = gets('td.1@a.0@text');\n\tbkid = gets('td.1@a.0@href');\n\t}\nelse if (/^[è¯„å•â–³å£¹è´°]$/.test(bj)) {\n\tresult=gets('$.Name||BookName');\n\tbkid = gets('$.Id||BookId');\n\t}\n\tjava.put('bkid',String(bkid).match(/\\d{5,}/)[0]);\n} catch(err) {result='';}\nresult\n</js>",
    "wordCount": "<js>\nlet bj=java.get('bj');\nif (bj=='â‘ '||bj=='â‘¡') {\n\tresult = gets('td.3@text');\n\t}\nelse if (bj=='â‘¢'||bj=='â‘£') {\n\tresult = gets('td.4@text');\n\t}\nelse if (bj=='â‘¤') {\n\tresult = gets('td.5@text');\n\t}\nelse if (bj=='â‘¥') {\n\tresult = gets('td.-2@text');\n\t}\nelse if (bj=='å„„') {\n\tresult = gets('td.-1@text');\n\t}\nelse if (/^[â‘¦â… â…¡â…¢â…£â…¤â…«â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸]$/.test(bj)) {\n\tlet bkid = java.get('bkid');\n\tresult = cache.get('zs'+bkid);\t\n\tresult = gets('$.*.BaseBookInfo.WordsCnt',result);\t\n\t}\nelse if (/^[è¯„å•]$/.test(bj)) {\n\tresult='';\n\t}\nelse if (/^[â–³å£¹è´°]$/.test(bj)) {\n\tresult=gets('$.WordsCount');\n\t}\nif (/[Ww]$/.test(result)) {\n\tresult = (+result.slice(0,-1)*1e4|0)+'';\n\t}\nresult\n</js>"
  },
  "ruleSearch": {
    "author": "<js>\nlet ss=cache.getFromMemory('qdts');\nif (ss!=0&&ss<999) {\n\tgets('td.0@a.-1@text')\n\t}  else {gets('$..AuthorName')}\n</js>",
    "bookList": "@js:\ngxjslib();\nlet ss=cache.getFromMemory('qdts');\nif  (ss==0) {\nresult=java.getElement(\"$..CardList..ItemData[?(@.BookType==1)]\");\nresult.length==0&&(result=java.getElement(\"$..Data.Items[*]\"));\n}\n\telse if (ss==1||ss==1000) {\n\t cache.putMemory('qdzss',result);\n\t }\n\telse {\n\t\t\tlet re=cache.getFromMemory('qdzss');\n\t\t\tjava.setContent(re);\n\t\t\t}\n\nif (ss!=0) {\n\t//è‡³å°‘ä¸º6æœ¬æ‰è§¦å‘è‡ªåŠ¨åŠ è½½\n\tlet sss=(ss-1)*6;\n\tif (ss<999)\n\t\tresult = java.getElement('class.media['+sss+':'+(sss+5)+']@table@tbody');\n\t\telse\nresult=java.getElements('$.Data.RoleList[*]&&$..SimpleBooks[*]&&$.Data.SimpleBookInfoPageList[*]');\n\t}\nresult",
    "bookUrl": "<js>\n`data:page;base64,${java.base64Encode('https://m.qidian.com/book/'+java.get('bkid'))},{\"type\":\"lyc\"}` \n</js>",
    "checkKeyWord": "@å”ä¸‰",
    "coverUrl": "<js>\nlet bkid=java.get('bkid');\n'https://qidian.qpic.cn/qdbimg/349573/'+bkid+'/600'\n</js>",
    "intro": "<js>\nlet ss=cache.getFromMemory('qdts');\nif (ss!=0&&ss<999) {\n\tlet bkid = java.get('bkid');\n\tresult = cache.get('zs'+bkid);\t\n\tresult = gets('$.*.BaseBookInfo.Description',result).replaceAll('\\n','ã€€');\n\t}  else {result=gets('$..Description')}\nresult\n</js>",
    "kind": "<js>\nlet ss=cache.getFromMemory('qdts');\n\nif (ss!=0&&ss<999) {\n\tlet bkid = java.get('bkid');\n\tlet re=cache.get('zs'+bkid);\n\tif (!re) {\n\tlet url=QDSign(\"v3/bookdetail/get\", [\"bookId=\"+bkid,\"isOutBook=0\"]);\n\tre = java.ajax(url);\n\tcache.put('zs'+bkid,re,8640);\n\t//é˜²æ­¢è®¿é—®è¿‡äºé¢‘ç¹\n\tPackages.java.lang.Thread.sleep(ss*100);\n\t}\n\t\n\t\t//èµ·ç‚¹æ•°æ®\n\tlet lx=gets('$.*.BaseBookInfo.CategoryName',re);\n\tlet aul=gets('$.*.AuthorInfo.AuthorLevel',re);\n\tlet tj=gets('$.*.BaseBookInfo.RecommendAll',re);\n\t//æ¨èï¼Œå¯èƒ½ä¹¦ä¸å­˜åœ¨\n\ttj = tj>9999 ? \t'â–³'+(tj/10000).toFixed(2)+'ä¸‡' : tj>0 ? 'â–³'+tj : tj;\n\t//èµ·ç‚¹å›¾æ•°æ®\n\tlet sc = gets('td.3@text').match(/æ”¶è—\\D*([\\dw\\.]+)/)[1].replace('w','ä¸‡');\n\t\t//é¦–è®¢ï¼Œå¯èƒ½æ²¡æœ‰\n\t\t\tlet sd = gets('td.3@text').match(/é¦–è®¢\\D*([\\d]+)/);\n\t\t\t\tsd = sd ? 'ğŸ“Œ' + sd[1] : '';\n\t\n\tresult=[lx,aul,sd,tj,'â˜†'+sc];\n\t}  else if (ss!=0) {\n\t\tresult=gets('$.RoleName&&Position&&ActionStatusString');\n\t\t} else {result=gets('$..CategoryName');}\nresult\n</js>",
    "lastChapter": "<js>\nlet ss=cache.getFromMemory('qdts');\nif (ss!=0&&ss<999) {\n\tgets('td.-1@text')\n\t}  else {''}\n</js>",
    "name": "<js>\nlet ss=cache.getFromMemory('qdts');\nlet bkid;\nif (ss!=0&&ss<999) {\n\tbkid = String(gets('td.0@a.0@href')).match(/\\d{5,}/)[0];\n\tresult=gets('td.0@a.0@text');\n\t}  else {\n\t\tbkid = gets('$..BookId');\n\t\tresult=gets('$..BookName');\n\t\tif (!bkid) {bkid=\"000\";result=\"ä½œè€…\";java.put('bj','äºº');}\n\t\t}\njava.put('bkid',bkid);\nresult\n</js>",
    "wordCount": "<js>\nlet ss=cache.getFromMemory('qdts');\nif (ss!=0&&ss<999) {\n\tgets('td.2@text').match(/å­—æ•°\\D*([\\dw\\.]+)/)[1].replace('w','ä¸‡')\n\t}  else {gets('$..WordsCount')}\n</js>"
  },
  "ruleToc": {
    "chapterList": "@js:\nlet tim = Math.floor(Math.random()*91);\nPackages.java.lang.Thread.sleep(tim);\n//å¤„ç†èµ·ç‚¹\nlet bkid = java.get('bkid');\nlet yxj = java.get('yxj');\nlet bj=java.get('bj');\nlet xms=0;\nif (/^è¯„$/.test(bj)) {\n\tresult=[{\"N\":\"æ²¡æœ‰ç« èŠ‚\",\"C\":486}];}\nelse if (yxj!=1) {\n\t\n//è·å–è¯¦æƒ…\nlet rr=cache.get('zs'+bkid); //å†…å­˜ç¼“å­˜æ–‡ä»¶\nif (!rr) {\n\tlet url0=QDSign(\"v3/bookdetail/get\",[\"bookId=\" + bkid,\"isOutBook=0\"]);\n\tlet zustime3 = cache.getFromMemory('zustime');\nif (zustime3<Date.now()) zustime3=Date.now();\nzustime3+=300;\ncache.putMemory('zustime',zustime3);\nwhile(Date.now()<zustime3) {\n\tPackages.java.lang.Thread.sleep(300);}\n\trr=java.ajax(url0);\n\tPackages.java.lang.Thread.sleep(500);}\n\n//æœ€æ–°æ—¶é—´å…è´¹\nlet lct=gets('$.*.BaseBookInfo.ChapterInfo.LastChapterUpdateTime',rr);\n//æœ€æ–°æ—¶é—´vip\nlet lct2=gets('$.*.BaseBookInfo.ChapterInfo.LastVipChapterUpdateTime',rr);\nif (lct2>0) book.putVariable(\"vip\",1); //æ ‡è®°vip\n//é‡‡ç”¨æœ€æ–°çš„\nif (lct2>lct) lct=lct2;\nlet xme=gets('$.*.BaseBookInfo.LimitEnd',rr);\nif (xme>0) {\njava.toast(`\nã€Š${book.name}ã€‹é™å…ä¸­\nç»“æŸæ—¶é—´ï¼š${java.timeFormatUTC(xme,\"yyyy-MM-dd HH:mm\",8*36e5)}`);\nxms=gets('$.*.BaseBookInfo.LimitStart',rr);\nxms=java.timeFormatUTC(xms,\"yyyy-MM-dd HH:mm\",-40*36e5);} else xms=0;\nlet bklst = java.get('bklst');\nlet bklsr = java.get('bkmlr');\n//å¼€å§‹åˆ†é€»è¾‘\nif (bklst==lct && bklsr!='') {\n\tresult=JSON.parse(bklsr);\n\t//æ— æ–°ç« èŠ‚\n\t} else {\n\t//åŸé€»è¾‘\ncache.put('zs'+bkid,rr,3600*8); //ä¸€å¤©ä¸‰æ¬¡\nlet url11=QDSign(\"v3/chapterlist/chapterlist\",[\"bookId=\"+bkid,\"timeStamp=0\",\"requestSource=0\",\"md5Signature=\",\"extendchapterIds=\"]);\nresult=jiesuo(url11,bkid);\nlet zustime = cache.getFromMemory('zustime');\nif (zustime<Date.now()) zustime=Date.now();\nzustime+=300;\ncache.putMemory('zustime',zustime);\nwhile(Date.now()<zustime) {\n\tPackages.java.lang.Thread.sleep(300);}\nlet rr0=[{\"C\":-10000,\"N\":\"ç‰ˆæƒä¿¡æ¯\",\"uuid\":-1}];\nlet rr1= com.jayway.jsonpath.JsonPath.parse(result).read('$.data.vs[*]');\nlet Void=200;\nfor (let char of rr1) {\n\tlet r0={};\n\tlet n=char.wC;\n\tlet Von=char.vN;\nif (char.vN==\"ä½œå“ç›¸å…³\") {r0.C=100;}\nelse if (Void==200) {r0.C=Void;Void=80000;}\nelse {r0.C=Void++;}\n\tr0.N=Von;\n\tr0.T=`å…±${char.cCnt}ç«  ${n>9999?(n/10000).toFixed(1)+'ä¸‡å­—':n+'å­—'}`;\n\tr0.Vo=1;\n\trr0.push(r0);\n\tlet css=char.cs;\n\tfor (let cs of css) {\n\t\tlet r0={};\n\t\tr0.C=cs.id;r0.N=cs.cN;\n\t\tr0.T=cs.uT+\" \"+cs.cnt+\"å­—\";\n\t\tr0.V=1-cs.sS;\n\t\tr0.uuid=cs.uuid;\n\t\trr0.push(r0);\n\t\t}\n}\nbook.putVariable('cdw',JSON.stringify(rr0));\n\n//è·å–å½©è›‹ç« \nlet url2=QDSign(\"v1/midpage/book/chapters\",[\"bookId=\"+bkid]);\n\tresult = java.ajax(url2);\n\tjava.setContent(result);\n\tlet rr2=java.getElement('$.*.Chapters[*]');\nfor (let char of rr2) {\n\tlet cidc = char.ChapterId;\n\tlet ind = rr0.findIndex(x => x.C == cidc);\n\tchar.C='å½©'+cidc;\tchar.T=java.timeFormatUTC(char.MidpageList[0].UpdateTime,\"yyyy-MM-dd HH:mm\",8*36e5);\t\nchar.N=Array.from(char.MidpageList).map(x=>x.MidpageName).join(\" \");\n\tif (ind>0) rr0.splice(ind+1,0,char); //æ²¡æ‰¾åˆ°çš„è¡¨ç¤ºå·²åˆ é™¤\n\t}\n\n//å®šä½\nif (source.get('zså®šä½é¦–ç« ')==1) {\nlet ind = rr0.findIndex(x=>x.C==200);\nif (!book.durChapterIndex) book.durChapterIndex=ind+1;}\nresult=rr0;\nbook.putVariable('bkmlr',JSON.stringify(result));\nbook.putVariable('bklst',lct);\n//åŸé€»è¾‘ç»“æŸ\n}\n\n//æœˆç¥¨æ£€æµ‹\nlet yp = source.get('zsæœˆç¥¨æ´»åŠ¨');\nif (yp=='1'&&book.order!=0) {\n\t//è·å–æ´»åŠ¨\nlet url3=QDSign(\"v1/fund/activitylistdetail\",[\"bookId=\" + bkid,\"pg=1\",\"pz=20\"]);\nlet zustime2 = cache.getFromMemory('zustime');\nif (zustime2<Date.now()) zustime2=Date.now();\nzustime2+=300;\ncache.putMemory('zustime',zustime2);\nwhile(Date.now()<zustime2) {\n\tPackages.java.lang.Thread.sleep(300);}\nlet rr3=java.ajax(url3);\nlet sz = lookyp(rr3);\nif (sz.length>0) looky(sz);\n}\n\n} else {\n\t//ä¸‹æ¶ä¹¦\n\tresult=[{\"N\":\"å·²ä¸‹æ¶\",\"C\":486}];}\n\nlet bkbl = book.getVariable(\"custom\")+[];\nresult.map(x=>{\nif (x.V==1) {\n\tlet uvip=String(book.getVariable(\"uvip\"+x.C));\n\tif (bkbl&&uvip!='') x.V=0;}\nx.C=\"data:;base64,\"+java.base64Encode(x.C)+',{\"type\":\"lyc\"}';\nreturn x});",
    "chapterName": "N",
    "chapterUrl": "C",
    "isVip": "V",
    "isVolume": "Vo",
    "updateTime": "T"
  },
  "searchUrl": "@js:\n/*\næœç´¢æ—¶ï¼Œå¯è¾“å…¥@ååŠ ä¸Šæ¡ä»¶è¿›è¡Œç­›é€‰æˆ–è€…æŒ‰è¦æ±‚æ’åºã€‚æ”¯æŒè¾“å…¥ä¹¦ç±id\nç›®å‰å¯é€‰æ¡ä»¶æœ‰ï¼šå®Œæœ¬ï¼Œè¿è½½ï¼Œ3æ›´ ï¼Œ7æ›´ï¼Œ30æ›´ï¼Œå…è´¹ï¼Œç²¾å“ï¼Œ30ä¸‡å­—ï¼Œ30-50ä¸‡å­—ï¼Œ50-100ä¸‡å­—ï¼Œ100-200ä¸‡å­—ï¼Œ50ä¸‡å­—ï¼Œ100ä¸‡å­—ï¼Œ200ä¸‡å­—\nå¯é€‰æ’åºæœ‰ï¼šé»˜è®¤ï¼Œæ›´æ–°ï¼Œæ¨èï¼Œæœˆç¥¨ï¼Œæ”¶è—ï¼Œå­—æ•°\n//è§£é‡Šï¼š3æ›´ï¼ŒæŒ‡3å¤©å†…æœ‰æ›´æ–°ï¼›30ä¸‡å­—ï¼ŒæŒ‡30ä¸‡å­—ä»¥å†…ï¼›å…è´¹å’Œç²¾å“æ— æ³•åŒæ—¶èµ·æ•ˆï¼›æ¨èï¼ŒæŒ‡æŒ‰æ¨èç¥¨æ•°é‡æ’åº\n//ä¸¾ä¾‹ï¼šâ€œé‡ç”Ÿ@å…è´¹â€ï¼Œâ€œç³»ç»Ÿ@30ä¸‡å­—@å…è´¹â€ï¼Œâ€œæˆ‘çš„@æœˆç¥¨@ç²¾å“â€\n*/\nif (/^\\u200b|^ï¼š/.test(key)) {\n\tif (page==1) {\n\t\tresult = gethd(qdturl+'/author/'+key.slice(1));} else {\n\t\t\tresult='data:;base64,MQ,{\"type\":\"lyc\"}';}\n\t\t\t//ä½œè€…æœç´¢\n\t\t\tcache.putMemory('qdts',page);\n\t}\nelse if (/\\d{5,}$/.test(key)) {\n\t\tlet bkid = key.match(/\\d+$/)[0];\n\t\t//è·³è¯¦æƒ…é¡µ\n\t\tresult = 'http://127.0.0.1/qdzs/'+bkid;\n\t\t}\nelse if (/^@@/.test(key)) {\n\tcache.putMemory('qdts',page*1000);\n\tif (page==1)\n\tresult = QDSign(\"v1/booksearch/autocomplete\",[\"siteId=1\",\"keyword=\"+key.slice(2),\"count=20\"]);\n\telse result='data:;base64,QQ,{\"type\":\"lyc\"}';\n}\nelse if (/^@/.test(key)) {\n\t//è§’è‰²\n\tcache.putMemory('qdts',0);\n\tresult=QDSign(\"v2/booksearch/searchRoleBooks\",[\"pageIndex=\"+page,\"roleName=\"+key.slice(1),\"pageSize=10\"]);\n} else {\ncache.putMemory('qdts',0);\nlet sz = key.split(\"@\");\n//å¸¦ç¬¦å·å¯ä½¿è‡ªåŠ¨æ’åºå¤±æ•ˆ\nlet kk = sz.shift().replace(/^[#ï¼ƒ]/,'');\nlet re = ['keywordType=1','siteId=1','keyword='+kk,'pageIndex='+page,'pageSize=20'];\n\nlet book_zt = book_px = \"\";\nbook_zt = sz.includes(\"å®Œæœ¬\")\n? \"actionstatus=1,\"\n:sz.includes(\"è¿è½½\")\n? \"actionstatus=2,\"\n:sz.includes(\"3æ›´\")\n? \"actionstatus=3,\"\n:sz.includes(\"7æ›´\")\n? \"actionstatus=4,\"\n:sz.includes(\"30æ›´\")\n? \"actionstatus=5,\"\n:\"\"\nbook_zt += sz.includes(\"200ä¸‡å­—\")\n? \"wordscount=1,\"\n:sz.includes(\"100ä¸‡å­—\")\n? \"wordscount=2,\"\n:sz.includes(\"50ä¸‡å­—\")\n? \"wordscount=3,\"\n:sz.includes(\"100-200ä¸‡å­—\")\n? \"wordscount=4,\"\n:sz.includes(\"50-100ä¸‡å­—\")\n? \"wordscount=5,\"\n:sz.includes(\"30-50ä¸‡å­—\")\n? \"wordscount=6,\"\n:sz.includes(\"30ä¸‡å­—\")\n? \"wordscount=7,\"\n:\"\"\nbook_zt += sz.includes(\"å…è´¹\")\n? \"paidmode=1,\"\n:sz.includes(\"ç²¾å“\")\n? \"paidmode=3,\"\n:\"\"\nbook_px = sz.includes(\"é»˜è®¤\")\n? \"=11\"\n:sz.includes(\"æ›´æ–°\")\n? \"=1\"\n:sz.includes(\"æ¨è\")\n? \"=2\"\n:sz.includes(\"æœˆç¥¨\")\n? \"=4\"\n:sz.includes(\"æ”¶è—\")\n? \"=3\"\n:sz.includes(\"å­—æ•°\")\n? \"=6\"\n:\"\"\nbook_px==\"\" ? '' : re.push(\"order\"+book_px);\nbook_zt==\"\" ? '' : re.push(\"filters=\"+book_zt.slice(0,-1));\n\nresult = QDSign(\"v2/booksearch/searchbooks\",re);}\nPackages.java.lang.Thread.sleep(300);\nresult",
  "variableComment": "æºå˜é‡ï¼šæƒé™å¯†ç \nä¹¦ç±å˜é‡ï¼šè§£é”ä½¿ç”¨ç½‘ç«™çš„ç›®å½•é“¾æ¥\n",
  "weight": 0
}]