[{
  "articleStyle": 0,
  "customOrder": -10100148,
  "enableJs": true,
  "enabled": true,
  "enabledCookieJar": false,
  "injectJs": "let cch=localStorage.getItem('importHistory');\nif (cch) window.run(`source.put('importHistory',\\`${cch}\\`)`);\nelse window.run(`source.get('importHistory')`).then(r=>{localStorage.setItem('importHistory',r);showHistory()});",
  "lastUpdateTime": 1757537599861,
  "loadWithBaseUrl": true,
  "ruleContent": "<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <title>阅读导入</title>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\r\n    <meta name=\"description\" content=\"洛娅橙，开源阅读软件，书源、订阅源、字典、净化等json、txt文件导入，小说书籍地址导入,base64，链接净化,精华规则。\">\r\n    <style>\r\n        :root {\r\n            --back-color: #fffbf0;\r\n            --font-color: black;\r\n        }\r\n\r\n        @media (prefers-color-scheme: dark) {\r\n            :root {\r\n                --back-color: #1a1a1a;\r\n                --font-color: white;\r\n            }\r\n        }\r\n\r\n        html {\r\n            background-color: var(--back-color);\r\n            color: var(--font-color);\r\n        }\r\n\r\n        .hidden {\r\n            display: none;\r\n        }\r\n\r\n        body {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            min-height: 80vh;\r\n        }\r\n\r\n        textarea {\r\n            font-size: 12px;\r\n            color: var(--font-color);\r\n            width: 96%;\r\n            margin: 16px 2%;\r\n            padding: 8px;\r\n            background-color: rgba(80, 155, 84, 0.1);\r\n            border-radius: 10px;\r\n            border: 2px solid rgba(76, 175, 80, 0.3);\r\n        }\r\n\r\n        textarea:focus {\r\n            border-color: rgb(76, 175, 80);\r\n            outline: none;\r\n            box-shadow: 0 0 8px rgba(255, 107, 107, 0.3);\r\n        }\r\n\r\n        button {\r\n            user-select: none;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            height: 40px;\r\n            width: 80px;\r\n            overflow: hidden;\r\n            transition: 0.3s;\r\n            font-size: 16px;\r\n        }\r\n\r\n        .an-s {\r\n            transform: scale(0.8);\r\n        }\r\n\r\n        button {\r\n            margin: 10px;\r\n        }\r\n\r\n        #btn1 {\r\n            background-color: rgba(76, 175, 80, 0.9);\r\n        }\r\n\r\n        #btn2 {\r\n            background-color: rgba(175, 76, 80, 0.9);\r\n        }\r\n\r\n        #btn3 {\r\n            background-color: rgba(76, 80, 175, 0.9);\r\n        }\r\n\r\n        #history {\r\n            width: 90%;\r\n            margin: 8px 2%;\r\n        }\r\n\r\n        #history div {\r\n            font-size: 12px;\r\n            border-radius: 6px;\r\n            cursor: pointer;\r\n            padding: 4px 8px;\r\n            margin: 10px 0;\r\n            background-color: rgba(75, 175, 175, 0.3);\r\n            overflow-wrap: break-word;\r\n            word-break: break-word;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <h1 class=\"hidden\">在线导入-洛娅橙</h1>\r\n    <textarea id=\"copyt\" rows=\"9\" placeholder=\"在这里填写链接\r\n支持书源、订阅源、净化、字典等json或txt文件\r\n支持书籍网址（需要有对应的书源）\r\n支持data或base64加密链接\"></textarea>\r\n    <button id=\"btn1\" onclick=\"copy(1)\">导入</button>\r\n    <button id=\"btn2\" onclick=\"cleart()\">清空</button>\r\n    <button id=\"btn3\" onclick=\"copy(3)\">净化</button>\r\n    <div id=\"history\"></div>\r\n    <script>\r\n        function showHistory() {\r\n            const historyDiv = document.getElementById('history');\r\n            let history = JSON.parse(localStorage.getItem('importHistory') || '[]');\r\n            if (history.length === 0) {\r\n                historyDiv.innerHTML = '<span style=\"font-size:12px;color:gray;\">暂无导入历史</span>';\r\n                return;\r\n            }\r\n            historyDiv.innerHTML = history.map(item =>\r\n                `<div onclick=\"fillHistory('${encodeURIComponent(item)}')\">${item}</div>`\r\n            ).reverse().join('');\r\n        }\r\n        function fillHistory(val) {\r\n            document.getElementById('copyt').value = decodeURIComponent(val);\r\n        }\r\n        function copy(x) {\r\n            const btn = document.getElementById('btn' + x);\r\n            btn.classList.add('an-s');\r\n            const cpt = document.getElementById(\"copyt\");\r\n            let url = cpt.value;\r\n            if (/[删除去消].*(?:[删除去掉].*[中汉我]|汉.*字|中.*文|文.*字)/.test(url)) url = url.replace(/[abphm]站|[一-ꀀ]/g, '');\r\n            url = url.replace(/[\\s一-ꀀ，。？！；…“‘、’”]+$/, '').replace(/\\s+|(?:\\p{Emoji_Presentation}|\\p{Emoji}[\\uFE0F\\u200d]+)+|\\[(?:酷币|受虐滑稽|微笑|哈哈哈|呵呵|呲牙|可爱|可怜|皱眉|惊讶|微笑|坏笑|流泪|抱拳|色|强|doge笑哭|doge原谅ta|旺财|OK)\\]/giu, '').replace(/(\\/.+\\.(?:json|txt|zip))(?:[^\\/\\?\\-\\_\\.][\\S\\s]*)$/, '$1').replace(/^[\\S\\s]+?(?=https?:)/i, '').replace(/\\u0026/g, '%26');\r\n            if (url.startsWith('data:')) url = atob(url.match(/^[^,]+,([^\\s,]+)/)[1]);\r\n            else if (/^[\\da-z\\+\\/]{2,}=*$/i.test(url)) url = atob(url);\r\n            setTimeout(() => {\r\n                btn.classList.remove('an-s');\r\n            }, 500);\r\n            if (url == '') { alert('请输入内容'); return }\r\n            if (/^https?\\:/i.test(url) && x == 1) {\r\n                let history = JSON.parse(localStorage.getItem('importHistory') || '[]');\r\n                history = history.filter(item => item != url);\r\n                history.push(url);\r\n                if (history.length > 20) history = history.slice(-20);\r\n                localStorage.setItem('importHistory', JSON.stringify(history));\r\n                showHistory();\r\n                if (/\\/.+\\.(?:json|txt)/i.test(url)) {\r\n                    window.location.href = 'legado://import/Source?src=' + url;\r\n                }\r\n                else if (/\\/.+\\.(?:zip)/i.test(url)) {\r\n                    window.location.href = 'legado://import/bookSource?src=' + url;\r\n                }\r\n                else {\r\n                    window.location.href = 'legado://import/addToBookshelf?src=' + url;\r\n                }\r\n            }\r\n            else if (x == 3) { cpt.value = url; }\r\n            else alert('链接格式错误');\r\n        }\r\n        function cleart() {\r\n            const btn = document.getElementById('btn2');\r\n            btn.classList.add('an-s');\r\n            const cpt = document.getElementById(\"copyt\");\r\n            setTimeout(() => {\r\n                btn.classList.remove('an-s');\r\n            }, 300);\r\n            cpt.value = '';\r\n        }\r\n\r\n        let clearTimer = null;\r\n        const btn2 = document.getElementById('btn2');\r\n        btn2.addEventListener('pointerdown', function () {\r\n            clearTimer = setTimeout(() => {\r\n                localStorage.removeItem('importHistory');\r\n                showHistory();\r\n                alert('已清空历史记录');\r\n            }, 800);\r\n        });\r\n        btn2.addEventListener('pointerup', function () {\r\n            clearTimeout(clearTimer);\r\n        });\r\n        btn2.addEventListener('pointercancel', function () {\r\n            clearTimeout(clearTimer);\r\n        });\r\n\r\n        window.onload = showHistory;\r\n    </script>\r\n</body>\r\n\r\n</html>",
  "showWebLog": true,
  "singleUrl": true,
  "sourceComment": "版本：1.1.7\n——洛娅橙",
  "sourceIcon": "https://gitee.com/lyc486/yuedu/raw/master/drtb.gif",
  "sourceName": "导入",
  "sourceUrl": "https://loyc.xyz/b/daoru"
}]